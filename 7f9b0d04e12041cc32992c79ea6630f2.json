{
  "problem_type": "跨平台脚本同步",
  "content": "## 问题重述\n将同一功能的脚本在不同平台（如 Bash 和 PowerShell）之间进行逻辑同步，确保功能一致性和用户体验一致性。\n\n## 可复用解决流程\n\n### 1. 分析阶段（INTENT/RESEARCH）\n- 读取并对比两个脚本的功能点\n- 列出功能差异清单\n- 识别平台特有的限制和差异\n- 确认同步范围（完全同步或部分同步）\n\n### 2. 设计阶段（INNOVATION/PLAN）\n- 制定同步策略（完全对齐 vs 保留差异）\n- 确定关键同步点：\n  * 配置变量（镜像源、路径等）\n  * 用户交互逻辑（选择、确认）\n  * 核心功能实现（安装、克隆等）\n  * 错误处理机制\n- 规划任务拆分（按功能模块或依赖关系）\n\n### 3. 实现阶段（EXECUTE）\n按优先级依次实现：\n\n**a) 配置变量同步**\n- 镜像源配置（Gitee/GitHub 双源）\n- 环境变量（路径、URL等）\n- 默认值设置\n\n**b) 用户交互逻辑**\n- 安装方式选择（direct/clone）\n- 功能选项确认（RAG、补全等）\n- 使用 switch 语句（PowerShell）vs case 语句（Bash）\n\n**c) 核心功能实现**\n- 镜像源降级：先试镜像源，失败降级原源\n  * PowerShell: try { git clone $MIRROR } catch { git clone $ORIGINAL }\n  * Bash: git clone $MIRROR || git clone $ORIGINAL\n- 安装方式：使用对应的包管理器命令\n\n**d) 错误处理**\n- PowerShell: try-catch\n- Bash: || 或 set -e\n\n### 4. 验证阶段（REVIEW）\n- 语法检查（PowerShell: 实际运行验证；Bash: bash -n）\n- 功能对比：逐项验证功能点\n- 边界情况：网络失败、权限问题、已有文件等\n\n## 关键注意事项\n\n### 语法差异\n1. **错误处理**\n   - PowerShell: try { command } catch { fallback }\n   - Bash: command || fallback 或 set -e\n\n2. **变量定义**\n   - PowerShell: $VARIABLE = \"value\"\n   - Bash: VARIABLE=\"value\"\n\n3. **条件判断**\n   - PowerShell: if ($condition) { ... }\n   - Bash: if [ condition ]; then ... fi\n\n4. **字符串比较**\n   - PowerShell: $choice -eq 'y'\n   - Bash: $choice == 'y' 或 [ \"$choice\" = 'y' ]\n\n5. **多分支逻辑**\n   - PowerShell: switch ($choice) { \"1\" { ... } default { ... } }\n   - Bash: case $choice in 1) ... ;; *) ... ;; esac\n\n6. **命令执行**\n   - PowerShell: & command 或直接 command\n   - Bash: command\n\n7. **空检查**\n   - PowerShell: if (-not $command) 或 $null\n   - Bash: if [ -z \"$command\" ] 或 [ ! $command ]\n\n### 平台特定注意事项\n- **路径分隔符**：Windows 使用反斜杠 `\\`，Linux 使用正斜杠 `/`\n- **环境变量**：PowerShell 使用 `$env:VARIABLE`，Bash 使用 `$VARIABLE`\n- **用户目录**：PowerShell 使用 `$env:USERPROFILE`，Bash 使用 `$HOME`\n- **临时文件处理**：注意清理临时文件，避免提交到 git\n\n### 验证标准\n1. 两个脚本的功能点完全对应\n2. 用户体验一致（提示信息、选项顺序等）\n3. 错误处理逻辑相同\n4. 在各自平台上可正常运行\n5. 无临时文件残留\n\n## 可选步骤\n- 为脚本添加版本号和更新日志\n- 添加测试用例或测试脚本\n- 创建同步自动化脚本（如果差异规律性强）",
  "scope": "global"
}