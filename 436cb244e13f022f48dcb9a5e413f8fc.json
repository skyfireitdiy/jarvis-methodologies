{
  "problem_type": "C-to-Rust函数行为验证",
  "content": "## C-to-Rust函数行为验证方法论\n\n### 问题重述\n当将C语言函数翻译为Rust时，需要确保行为完全一致，特别是边界条件和异常处理。\n\n### 可复用解决流程\n\n#### 步骤1：分析C源码行为\n1. 使用`read_code`工具读取原始C实现\n2. 识别关键行为模式：遍历模式 vs 直接跳转模式\n3. 注意边界条件：EOF处理、空指针检查\n\n#### 步骤2：创建测试用例验证\n1. 构建最小可重现的token序列\n2. 使用`create_test_tokens`构建测试环境\n3. 添加调试输出验证每个token位置\n\n#### 步骤3：实现Rust版本\n1. 保持与C相同的行为模式\n2. 使用unsafe块处理指针操作（如必要）\n3. 简化实现，避免过度复杂化\n\n#### 步骤4：验证修复\n1. 使用`execute_script`运行`cargo test --test-name`\n2. 逐个验证测试用例通过\n3. 检查无回归问题\n\n### 注意事项\n- 测试用例的期望可能与实现理解有差异，需要仔细分析token序列\n- Rust的链表结构与C的指针链表需要正确映射\n- 始终从最小修改开始，逐步验证\n\n### 可选步骤\n- 添加临时调试输出定位具体失败位置\n- 对比C和Rust实现的关键差异点\n- 使用RUST_BACKTRACE=1获取详细错误信息"
}