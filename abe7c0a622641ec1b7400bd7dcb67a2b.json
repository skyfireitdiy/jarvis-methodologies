{
  "problem_type": "Rust测试间歇性失败处理",
  "content": "## Rust测试间歇性失败处理方法论\n\n### 问题重述\n当Rust测试出现间歇性失败（尤其是并发环境下），需要区分是代码逻辑问题还是测试环境竞态条件。\n\n### 可复用解决流程\n\n1. **第一次验证** - 单测试用例验证\n   ```bash\n   cargo test <具体测试名称> -- --nocapture\n   ```\n\n2. **第二次验证** - 全量测试验证  \n   ```bash\n   cargo test -- --nocapture\n   ```\n\n3. **结果对比**\n   - 如果单测试通过但全量失败 → 可能是并发竞态\n   - 如果单测试也失败 → 代码逻辑问题\n   - 如果重新运行后都通过 → 环境偶发问题\n\n4. **如为竞态问题** - 添加测试隔离\n   - 检查测试用例是否使用共享全局状态\n   - 确保每个测试有独立的数据准备和清理\n   - 使用`#[serial]`或类似机制串行化敏感测试\n\n### 注意事项\n- 不要仅凭一次失败就修改代码\n- 多次运行确认问题稳定性\n- 优先确保测试用例的幂等性\n- 测试清理逻辑必须完整（如临时文件清理）\n\n### 可选步骤\n- 使用`cargo test -- --test-threads=1`单线程运行测试\n- 添加调试输出定位竞态点\n- 检查全局静态变量的锁使用是否正确"
}