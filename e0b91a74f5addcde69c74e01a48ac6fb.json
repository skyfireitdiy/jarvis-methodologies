{
  "problem_type": "Git版本发布说明生成",
  "content": "### 问题重述\n如何根据 Git 仓库的提交历史，自动生成一份内容详实、分类清晰的版本发布说明（Release Note），并可选地生成用于宣发的多风格推广文案。\n\n### 可复用解决流程\n1.  **准备阶段：检查工作区状态**\n    - **工具**: `execute_script`\n    - **操作**: 执行 `git status --porcelain` 命令，检查是否存在未提交的更改。\n    - **说明**: 确保即将分析的版本历史是完整的。如果存在未提交代码，应先使用 `jgc` 或 `git commit` 进行提交。\n\n2.  **确定分析范围**\n    - **工具**: `execute_script`\n    - **操作**: 执行 `git describe --tags --abbrev=0` 获取最新的 Git tag。这将作为代码变更分析的起始点。分析的范围通常是 `<latest_tag>..HEAD`。\n\n3.  **信息收集：结合摘要与详情**\n    - **背景**: 仅依赖提交信息（`git log`）可能无法全面理解变更内容。用户的反馈“要阅读修改的代码，不仅是查看提交记录”是本流程的关键。\n    - **工具**: `execute_script`\n    - **操作**:\n        - **获取提交摘要 (Intent)**: 运行 `git log <tag>..HEAD --pretty=format:\"%s\"` 获取此范围内的所有提交标题，了解变更的“意图”。\n        - **获取代码详情 (Implementation)**: 运行 `git diff <tag>..HEAD` 获取所有代码的实际修改内容。这是生成高质量发布说明的核心依据。\n\n4.  **内容生成：模型综合分析**\n    - **工具**: 无（由 Agent 的核心 LLM 能力完成）\n    - **操作**: 将上一步收集到的“提交摘要”和“代码详情”一并提供给大模型，并下达以下指令：\n        - **生成Release Note**: 要求模型根据信息，将变更分类（如：新功能、修复、优化、文档等），并按照指定的 Markdown 格式生成结构化的发布说明。\n        - **(可选) 生成推广文案**: 要求模型基于发布说明中的亮点，创作多种不同风格（如：专业、俏皮、简约）的朋友圈或社交媒体推广文案。\n\n### 注意事项\n- **代码差异的重要性**: `git diff` 的输出是保证发布说明准确性的关键，能提供 commit message 中缺失的上下文。\n- **上下文长度**: 对于非常大的版本迭代，`git diff` 的输出可能会很长。如果超出模型上下文窗口，应考虑分块处理或使用支持更长上下文的模型。\n- **版本号递增**: 在生成新的 Release Note 时，通常需要将版本号递增（例如，从 `v0.3.31` 到 `v0.3.32`）。"
}