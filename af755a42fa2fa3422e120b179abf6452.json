{
  "problem_type": "Rust测试失败根本原因分析",
  "content": "问题重述：在Rust项目中遇到测试失败时，如何系统性地分析根本原因，特别是涉及全局状态管理和测试隔离性问题。\n\n可复用解决流程：\n1. 复现测试失败\n   - 使用execute_script运行具体测试：cargo test <测试名> -- --nocapture\n   - 收集完整的错误输出和panic信息\n\n2. 分析测试代码\n   - 使用read_code读取测试函数实现\n   - 识别测试的前置条件（setup）和断言（assertions）\n   - 检查测试间的清理机制（如clear_scopes、clear_typedefs）\n\n3. 检查相关实现代码\n   - 使用read_code读取被测试的函数实现\n   - 重点关注全局状态管理（lazy_static、Mutex等）\n   - 验证查找逻辑是否正确实现\n\n4. 识别测试隔离性问题\n   - 检查全局状态是否在测试间正确清理\n   - 确认所有相关全局变量都有对应的清理函数\n   - 验证清理函数是否被测试正确调用\n\n5. 制定修复方案\n   - 如果是清理不完整，添加缺失的清理函数\n   - 如果是实现逻辑错误，修正具体实现\n   - 如果是测试隔离性问题，完善清理机制\n\n注意事项：\n- 重点关注全局状态（如lazy_static变量）的清理\n- 测试应该独立运行，不应依赖其他测试的状态\n- 清理函数应该覆盖所有相关的全局状态\n- 验证修复后，确保所有测试都能独立通过\n\n可选步骤：\n- 添加更多的边界测试用例\n- 考虑使用测试框架提供的setup/teardown机制\n- 评估是否需要重构全局状态管理"
}