{
  "problem_type": "添加技能到 Jarvis",
  "content": "# 添加技能到 Jarvis\n\n## 问题重述\n将外部技能（本地路径或 git 仓库）集成到 Jarvis 系统，使 Agent 能够加载和使用这些技能来提升特定任务的表现。\n\n## 可复用解决流程\n\n### 步骤 1：准备环境\n1. 获取 Jarvis 数据目录路径（通常为 `~/.jarvis`）\n2. 创建 skills 子目录：`mkdir -p {{ jarvis_data_dir }}/skills`\n\n### 步骤 2：获取技能仓库\n**如果是 git 仓库：**\n```bash\ncd {{ jarvis_data_dir }}/skills\ngit clone --depth 1 --single-branch <git_url> <skill_name>\n   ```\n- 使用 `--depth 1` 减少下载时间\n- 使用 `--single-branch` 只克隆主分支\n\n**如果是本地路径：**\n- 确认路径存在且可访问\n- 可选择复制或直接引用\n\n### 步骤 3：分析技能内容\n1. 读取关键文档文件（按优先级）：\n   - README.md / README.rst\n   - package.json（Node.js）\n   - setup.py / pyproject.toml（Python）\n   - Cargo.toml（Rust）\n2. 提取技能信息：\n   - 技能名称\n   - 核心功能描述\n   - 主要特性\n   - 适用场景\n   - 许可证信息\n\n### 步骤 4：注册技能信息\n1. 创建/更新注册文件：`{{ jarvis_data_dir }}/rules/skills.md`\n2. 使用统一格式注册：\n   ```markdown\n   ## [技能名称]\n\n   - **功能描述**：[技能的核心功能描述]\n   - **位置**：[技能的完整路径]\n   - **添加时间**：[YYYY-MM-DD HH:MM:SS]\n   - **许可证**：[许可证类型]\n   - **仓库地址**：[如果是 git 仓库]\n   ```\n\n### 步骤 5：验证完成\n- [ ] 技能目录已克隆/创建\n- [ ] 技能路径可访问\n- [ ] 功能描述已生成\n- [ ] 注册信息已写入 skills.md\n- [ ] Markdown 格式正确\n\n## 注意事项\n\n1. **路径验证**：处理任何输入前必须验证路径有效性\n2. **仓库大小**：大型仓库使用 shallow clone，避免下载不必要的历史记录\n3. **目录冲突**：如果目标目录已存在，询问用户是否覆盖\n4. **许可证**：注意检查许可证类型，特别是商业使用限制\n5. **文档优先**：优先从文档中提取信息，缺失时再基于结构推断\n\n## 可选步骤\n\n### 1. 技能适配\n如果技能结构不符合 Jarvis 规范，可以考虑：\n- 转换 SKILL.md 格式为 Jarvis 规则格式\n- 创建适配脚本或包装器\n- 保留原始结构，仅注册引用\n\n### 2. 批量添加\n如果有多个技能需要添加：\n- 使用脚本批量克隆\n- 统一分析并生成注册信息\n- 按类别分组注册\n\n### 3. 更新机制\n- 定期检查 git 仓库更新\n- 使用 `git pull` 更新本地副本\n- 记录更新版本和变更日志\n\n## 相关资源\n\n- 规范文档：`builtin/rules/development_tools/add_skills.md`\n- 技能注册文件：`{{ jarvis_data_dir }}/rules/skills.md`\n- 技能存储目录：`{{ jarvis_data_dir }}/skills/`",
  "scope": "global"
}