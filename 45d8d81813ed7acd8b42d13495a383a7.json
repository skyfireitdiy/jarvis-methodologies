{
  "problem_type": "UTF-16/UTF-32字符串测试验证",
  "content": "# UTF-16/UTF-32字符串字面量测试验证方法论\n\n## 问题重述\n如何系统性地验证UTF-16/UTF-32字符串字面量解析功能的正确性，包括转义字符处理、Unicode编码转换、边界情况验证，确保100%测试覆盖率。\n\n## 可复用解决流程\n\n### 阶段1：测试用例设计\n1. **使用read_code工具**检查现有测试结构：\n   - `src/util/string.rs`中的测试模块\n   - `src/lexer/tokenizer.rs`中的集成测试\n\n2. **构建测试矩阵**：\n   - 转义字符：标准C转义、八进制、十六进制、Unicode转义\n   - Unicode范围：ASCII(0-7F)、BMP(80-FFFF)、辅助平面(10000-10FFFF)\n   - 边界情况：空字符串、最小/最大码点、代理对\n\n### 阶段2：测试验证执行\n1. **运行测试套件**：\n   ```bash\n   cargo test --lib\n   ```\n   或针对具体模块：\n   ```bash\n   cargo test utf8_to_utf16\n   cargo test utf8_to_utf32\n   cargo test parse_escape\n   ```\n\n2. **分析失败用例**：\n   - 记录失败的测试名称和错误信息\n   - 使用execute_script运行特定测试获取详细错误\n\n### 阶段3：质量验证\n1. **覆盖率验证**：\n   - 转义字符类型覆盖率：≥95%\n   - Unicode码点范围覆盖率：0x0000-0x10FFFF\n   - 边界值测试：关键边界点100%覆盖\n\n2. **正确性验证**：\n   - UTF-16代理对正确性：U+10000以上字符必须生成有效代理对\n   - 字节序一致性：小端字节序验证\n   - 错误处理：无效序列应返回预期错误类型\n\n## 注意事项\n1. **代理对规则**：UTF-16中U+D800-U+DFFF区域不能单独出现\n2. **转义序列**：注意\\\\uXXXX(4位)和\\\\UXXXXXXXX(8位)的区别\n3. **边界值**：特别验证U+0000, U+007F, U+FFFF, U+10000, U+10FFFF\n\n## 可选步骤\n- 性能测试：大字符串处理性能验证\n- 内存测试：确保无内存泄漏\n- 兼容性测试：与其他Unicode实现对比验证"
}