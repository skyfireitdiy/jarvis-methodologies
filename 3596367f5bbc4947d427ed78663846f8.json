{
  "problem_type": "多模块反向工程分析",
  "content": "# 多模块反向工程分析方法论\n\n## 规则简介\n\n本方法论用于对大型项目进行完整的反向工程分析，生成语言无关的设计方案文档。适用于包含多个模块、需要系统性架构分析的项目。通过分阶段、模块化的方式，确保分析覆盖所有关键功能点和模块关系。\n\n## 你必须遵守的原则\n\n### 原则1：分层递进\n\n**要求说明：**\n\n- **必须**：按照\"整体分析 → 模块分析 → 跨模块分析 → 总览整合\"的顺序执行\n- **必须**：在完成前一个阶段之前，不要进入下一个阶段\n- **禁止**：跳过整体分析直接进入模块细节分析\n- **禁止**：在模块分析未完成前进行跨模块关系分析\n\n### 原则2：语言无关性\n\n**要求说明：**\n\n- **必须**：文档使用通用术语描述设计，避免特定语言的语法细节\n- **必须**：关注架构设计、数据结构、算法逻辑，而非代码实现\n- **禁止**：在文档中过度描述特定语言的语法特性\n- **禁止**：将代码片段作为主要设计说明\n\n### 原则3：完整覆盖\n\n**要求说明：**\n\n- **必须**：每个模块文档包含：模块职责、结构说明、核心组件、依赖关系、设计决策、代码来源\n- **必须**：使用功能对照表验证所有功能点都被覆盖\n- **必须**：记录每个设计决策对应的代码位置（文件路径和行号范围）\n- **禁止**：遗漏关键模块或功能\n- **禁止**：凭空猜测代码功能或虚构依赖关系\n\n### 原则4：可追溯性\n\n**要求说明：**\n\n- **必须**：每个设计说明都要标注代码来源（目录和文件列表）\n- **必须**：记录关键代码片段的精确位置（文件路径 + 行号范围）\n- **必须**：标注不确定或需要进一步分析的部分\n- **禁止**：没有代码依据的设计描述\n\n### 原则5：结构化输出\n\n**要求说明：**\n\n- **必须**：文档输出到统一目录结构，反映项目模块层次\n- **必须**：每个模块生成独立的Markdown文档\n- **必须**：文档格式保持一致，使用标准化的章节结构\n- **禁止**：将不同职责的代码混在一起分析\n- **禁止**：文档格式混乱或不一致\n\n## 你必须执行的操作\n\n### 阶段1：整体分析准备\n\n1. **分析项目结构**：识别项目组织模式、构建系统、主要crate\n2. **确定分析范围**：明确需要分析的核心模块和支撑库\n3. **建立文档目录**：创建标准的文档输出目录结构\n4. **生成项目总览**：创建README.md文档，包含项目基本信息、结构概览、分析进度\n\n### 阶段2：模块独立分析\n\n1. **模块结构识别**：分析模块的目录结构、文件组织、子模块划分\n2. **核心功能提取**：识别模块的主要功能、核心组件、关键算法\n3. **依赖关系分析**：分析模块的外部依赖、内部依赖、特征门控\n4. **设计决策记录**：记录关键设计决策、设计模式应用、架构选择\n5. **文档生成**：生成包含完整章节的模块文档（职责、结构、组件、依赖、决策、代码来源）\n6. **功能对照验证**：创建功能对照表，验证所有功能点都被覆盖\n\n### 阶段3：跨模块关系分析\n\n1. **数据流分析**：分析模块间的数据传递路径、数据流向、数据转换\n2. **控制流分析**：分析初始化流程、调用关系、状态转换\n3. **接口分析**：整理公共接口、Trait接口、函数接口、RPC接口\n4. **依赖关系图构建**：绘制模块依赖关系图、分层依赖图、调用关系图\n5. **循环依赖检测**：识别循环依赖（如存在），分析影响和解决方案\n6. **核心模块识别**：识别被依赖最多的核心模块和边缘模块\n\n### 阶段4：总览整合\n\n1. **模块索引更新**：在README.md中添加所有模块文档的链接\n2. **分析进度更新**：更新已完成和待完成的任务列表\n3. **架构特点总结**：总结项目的架构特点、技术亮点、设计模式\n4. **技术栈汇总**：整理所有外部依赖、内部依赖、技术栈信息\n\n## 实践指导\n\n### 模块文档标准结构\n\n每个模块文档应包含以下章节：\n\n1. **模块概述**：模块职责、定位、核心功能\n2. **目录结构**：模块的文件组织方式\n3. **核心组件**：主要的数据结构、类、函数\n4. **功能说明**：详细的功能描述和使用示例\n5. **依赖关系**：外部依赖、内部依赖、特征门控\n6. **设计决策**：架构选择、设计模式应用、关键决策及理由\n7. **代码来源**：分析的代码目录、文件列表、关键代码位置\n8. **接口说明**：公开接口、Trait接口、配置参数\n9. **测试覆盖**：测试文件、测试用例、测试策略\n\n### 跨模块分析重点\n\n- **初始化顺序**：记录模块的初始化顺序和依赖关系\n- **通信机制**：分析模块间的通信方式（消息队列、RPC、共享内存等）\n- **事件驱动**：识别事件发布订阅机制、事件流、事件处理\n- **数据流向**：追踪关键数据的完整流动路径\n- **控制流**：分析关键流程（如初始化、异常处理、监控告警）\n\n### 质量检查要点\n\n- 检查每个模块文档是否包含所有必需章节\n- 验证功能对照表是否覆盖所有功能点\n- 确认每个设计决策都有代码位置标注\n- 检查跨模块依赖关系图的准确性\n- 验证文档格式的一致性和完整性\n\n## 检查清单\n\n### 阶段1：整体分析准备\n\n- [ ] 项目结构分析完成\n- [ ] 主要crate和模块识别\n- [ ] 文档目录结构创建\n- [ ] 项目总览README.md创建\n\n### 阶段2：模块独立分析\n\n- [ ] 所有核心模块分析完成\n- [ ] 所有支撑模块分析完成\n- [ ] 每个模块文档包含所有必需章节\n- [ ] 功能对照表完整且准确\n- [ ] 代码来源记录完整\n- [ ] 设计决策标注代码位置\n\n### 阶段3：跨模块关系分析\n\n- [ ] 数据流分析完成\n- [ ] 控制流分析完成\n- [ ] 接口分析完成\n- [ ] 依赖关系图绘制\n- [ ] 循环依赖检测（如有则标注）\n- [ ] 核心模块识别\n\n### 阶段4：总览整合\n\n- [ ] README.md包含所有模块链接\n- [ ] 分析进度已更新\n- [ ] 架构特点已总结\n- [ ] 技术栈已汇总\n\n### 文档质量检查\n\n- [ ] 所有文档格式一致\n- [ ] 文档内容语言无关\n- [ ] 没有虚构的代码或路径\n- [ ] 没有遗漏的关键模块\n- [ ] 所有设计都有代码依据",
  "scope": "global"
}