{
  "problem_type": "Rust测试结构优化",
  "content": "# Rust测试结构优化方法论\n\n## 问题重述\n二进制文件中测试用例过多，违反Rust项目最佳实践，需要将测试迁移到合适位置。\n\n## 可复用解决流程\n\n### 步骤1：识别测试类型\n- **单元测试**：与被测代码同文件，验证模块内部逻辑\n- **集成测试**：tests/目录，验证模块间交互\n- **二进制测试**：src/bin/下，验证CLI行为\n\n### 步骤2：迁移策略\n1. **创建测试目录**：`mkdir -p tests/`\n2. **创建集成测试文件**：`tests/integration_tests.rs`\n3. **迁移测试函数**：\n   - 复制所有测试函数到新文件\n   - 更新import路径（使用crate名而非super::*）\n   - 保留原测试逻辑不变\n4. **清理源文件**：\n   - 二进制文件保留1-2个基本测试验证功能\n   - 删除其余测试避免重复\n\n### 步骤3：验证迁移\n1. **运行全量测试**：`cargo test -- --nocapture`\n2. **检查测试统计**：\n   - 单元测试数量应减少\n   - 集成测试数量应增加\n   - 总测试功能不变\n3. **验证功能完整性**：确保无测试遗漏\n\n### 注意事项\n- 保持测试功能不变，仅位置调整\n- 更新import路径适应新位置\n- 二进制测试只保留CLI相关测试\n- 集成测试可访问crate私有项（需pub use）\n\n### 可选步骤\n- 创建tests/cli_tests.rs用于CLI专门测试\n- 使用#[cfg(test)]属性控制测试编译\n- 添加测试文档说明测试类型"
}