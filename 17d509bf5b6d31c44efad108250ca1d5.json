{
  "problem_type": "C编译器转译测试失败修复",
  "content": "# C编译器转译项目测试失败修复方法论\n\n## 问题重述\n当C编译器转译项目（从C到Rust）出现测试失败时，需要系统性地定位并修复问题，确保所有测试用例通过。\n\n## 可复用解决流程\n\n### 阶段1：问题识别与定位\n1. **运行完整测试**：`cargo test -- --nocapture`\n2. **识别失败类型**：\n   - 编译错误：查看具体错误位置和类型\n   - 测试断言失败：查看期望值vs实际值\n   - 内存错误：检查double free、use-after-free等\n3. **定位相关代码**：使用`read_code`读取失败测试用例和对应实现\n\n### 阶段2：根因分析\n1. **对比C实现**：使用`read_symbols`获取原始C源码\n2. **检查Rust实现差异**：重点查看：\n   - 内存管理（所有权、生命周期）\n   - 类型转换（指针、整数溢出）\n   - 边界条件处理\n   - 错误处理路径\n\n### 阶段3：修复实施\n1. **最小改动原则**：\n   - 优先修复具体错误，避免重构\n   - 保持现有接口不变\n   - 添加必要的错误处理而非panic\n2. **测试环境适配**：\n   - 为测试提供回退路径\n   - 使用条件编译`#[cfg(test)]`\n   - 缓存不可变结果优化性能\n\n### 阶段4：验证确认\n1. **单测验证**：`cargo test <test_name> -- --nocapture`\n2. **全量验证**：`cargo test -- --nocapture`\n3. **回归测试**：确保修复不破坏其他功能\n\n## 注意事项\n- 禁止使用`todo!()`或`unimplemented!()`作为占位\n- 必须处理所有编译警告和clippy警告\n- 测试环境下的路径处理要考虑可移植性\n- 内存问题优先使用Rust安全机制而非unsafe\n\n## 可选步骤\n- 添加调试输出：使用`println!()`或`dbg!()`定位问题\n- 运行特定测试加速调试：`cargo test <test_name>`\n- 使用`cargo check`快速验证语法"
}