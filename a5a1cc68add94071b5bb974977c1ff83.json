{
  "problem_type": "解决Rust测试中的类型不匹配问题",
  "content": "问题重述：\n在Rust单元测试中，经常遇到测试断言中的类型不匹配错误，特别是当函数返回不可变引用(&T)而测试代码中持有可变引用(&mut T)时。\n\n可复用解决流程：\n1. **识别错误类型**：查看编译器错误信息，确认是类型不匹配还是生命周期问题\n2. **分析引用类型**：检查函数签名与测试变量的引用类型差异\n3. **应用转换策略**：\n   - 对于&mut T到&T的转换：使用&*操作符进行解引用\n   - 对于Option<&mut T>到Option<&T>的转换：使用map(|r| &*r)或as_deref()\n   - 对于生命周期不匹配：检查Box::leak的使用是否正确\n4. **验证修复**：运行特定测试确认修复有效\n5. **回归测试**：运行相关模块的所有测试确保无回归\n\n注意事项：\n- 优先修改测试代码而非被测试的API，保持API稳定性\n- 使用git checkout重置文件可避免手动修改引入的语法错误\n- 对于复杂的类型转换，先使用cargo check确认编译通过\n\n可选步骤：\n- 使用cargo test -- --exact运行特定测试\n- 使用cargo test <module_name>运行模块测试\n- 使用RUST_BACKTRACE=1获取详细错误信息"
}