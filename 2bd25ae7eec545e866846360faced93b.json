{
  "problem_type": "C库函数转译到Rust",
  "content": "## 问题重述\n将C语言的库函数（如bzip2库中的函数）转换为Rust实现，需要保持API兼容性同时利用Rust的安全特性。\n\n## 可复用解决流程\n1. 分析C函数原型：识别参数类型、返回值类型和函数功能\n2. 创建对应的Rust函数签名：使用extern \"C\"和#[no_mangle]确保C兼容性\n3. 定义数据结构：创建Rust版本的结构体和常量定义\n4. 处理内存管理：实现分配和释放逻辑（可能需要使用std::alloc）\n5. 转换控制流：将C的控制结构转换为Rust等价结构\n6. 处理指针访问：正确访问解引用后的结构体字段\n7. 添加错误处理：将C的错误码返回值模式转换为Rust的错误处理\n\n## 注意事项\n- 保持与原C函数的ABI兼容性\n- 在unsafe块中处理原始指针操作\n- 正确处理C字符串和Rust字符串之间的转换\n- 遵循C函数的错误处理模式\n- 注意内存对齐和数据类型大小的一致性\n\n## 可选步骤\n- 实现渐进式转换，先注释未实现的依赖函数调用\n- 添加单元测试验证功能等价性\n- 逐步替换unsafe代码为更安全的Rust惯用法",
  "scope": "global"
}