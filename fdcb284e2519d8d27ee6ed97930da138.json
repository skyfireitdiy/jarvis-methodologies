{
  "problem_type": "C全局变量转译为Rust函数参数",
  "content": "## C全局变量转译为Rust函数参数的方法论\n\n### 问题重述\n当将C代码转译为Rust时，C中的全局变量需要转换为函数参数以保持行为一致性，同时需要最小化对现有代码的影响。\n\n### 可复用解决流程\n\n**步骤1：识别全局变量**\n- 分析C源码，识别所有使用全局变量的函数\n- 确定全局变量的作用和默认值\n\n**步骤2：设计参数传递策略**\n- 将全局变量作为函数参数添加到适当位置\n- 提供合理的默认值（通常为None或对应类型的默认值）\n- 保持函数行为向后兼容\n\n**步骤3：实施修改**\n1. 修改函数签名：使用edit_file添加新参数\n2. 添加全局变量检查逻辑：在函数开头检查新参数\n3. 更新所有调用点：使用search/replace批量修改\n\n**步骤4：测试验证**\n- 运行`cargo test --package <crate_name> --lib <module_path>::tests`\n- 验证原有功能不受影响\n- 添加新测试用例覆盖全局变量场景\n\n**步骤5：文档更新**\n- 更新函数文档注释说明新参数作用\n- 记录全局变量到函数参数的映射关系\n\n### 注意事项\n- 优先在函数签名末尾添加新参数\n- 确保所有测试用例同步更新\n- 保持最小化修改，避免重构无关代码\n- 使用FileType::None作为全局变量未设置的默认值\n\n### 可选步骤\n- 如需保持API稳定，可创建包装函数处理全局状态\n- 考虑使用配置结构体封装多个相关全局变量"
}