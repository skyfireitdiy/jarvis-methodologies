{
  "problem_type": "修复Rust测试用例的功能一致性问题",
  "content": "# Rust测试用例修复方法论\n\n## 问题重述\n在Rust项目中，测试用例可能因使用Mock对象或不准确的假设导致功能一致性问题，需要修复以确保测试反映真实场景。\n\n## 可复用解决流程\n\n### 步骤1：问题识别与定位\n- 使用 `lsp_client` 搜索测试相关符号（如测试函数名、测试模块）\n- 通过 `read_code` 读取测试文件，识别Mock使用和不准确假设\n- 定位具体需要修复的测试用例\n\n### 步骤2：真实性评估\n- 检查测试中使用的结构体是否为真实实例\n- 验证测试数据是否反映实际使用场景\n- 识别过度简化的测试逻辑\n\n### 步骤3：最小化修复\n- 优先使用真实结构体（如`File::default()`而非Mock）\n- 仅修改必要的测试逻辑，保持测试意图\n- 避免重构整个测试套件\n\n### 步骤4：内存安全验证\n- 添加基础内存访问检查\n- 移除基于不准确假设的偏移量检查\n- 确保测试不引入未定义行为\n\n### 步骤5：回归测试\n- 验证修复后的测试通过\n- 确保不破坏现有功能\n- 检查测试覆盖率是否保持或提升\n\n## 注意事项\n- 保持测试的单一职责，每个测试验证一个具体场景\n- 避免在测试中引入过多实现细节\n- 确保测试可维护性，避免复杂设置\n\n## 可选步骤\n- 如需要，可添加临时调试输出验证中间状态\n- 对于复杂场景，可先创建简化版本验证基本逻辑"
}