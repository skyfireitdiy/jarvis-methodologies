{
  "problem_type": "C到Rust函数转换调试修复",
  "content": "# C到Rust函数转换调试修复方法论\n\n## 问题重述\n解决C代码转译为Rust时出现的内存错误、类型不匹配、边界条件处理等问题。\n\n## 可复用解决流程\n\n### 阶段1：需求分析\n1. **理解C实现**：使用`read_symbols`获取C源码，分析函数签名和行为\n2. **识别依赖**：列出所有被调函数，检查是否已实现\n3. **类型映射**：建立C类型到Rust类型的对应关系表\n\n### 阶段2：实现转换\n1. **基础实现**：按C逻辑直译，保持最少改动\n2. **边界检查**：添加数组越界、空指针检查\n3. **内存安全**：使用Rust的Option和Result处理可空值\n4. **类型转换**：正确处理不同字节大小的数据类型\n\n### 阶段3：测试验证\n1. **单元测试**：为边界条件编写测试用例\n2. **集成测试**：运行完整测试套件\n3. **内存验证**：使用Valgrind或Address Sanitizer检查内存错误\n4. **性能测试**：确保转换后性能不低于C实现\n\n### 阶段4：调试修复\n1. **错误定位**：通过测试失败信息定位问题\n2. **调试输出**：在关键位置添加`println!`或`dbg!`\n3. **逐步验证**：小步修改，每次修改后运行测试\n4. **边界修复**：重点检查数组越界和空指针访问\n\n## 注意事项\n- 必须验证所有测试用例通过后才算完成\n- 禁止引入新的内存安全问题\n- 保持API兼容性，不破坏现有调用\n- 注释必须使用中文\n\n## 可选步骤\n- 添加性能基准测试\n- 编写使用文档\n- 创建回归测试用例"
}