{
  "problem_type": "C函数到Rust的TDD转译方法论",
  "content": "|||问题重述：如何将单个C函数通过TDD方法转译为Rust，确保语义等价且包含完整测试。\n\n可复用解决流程：\n1. 【信息收集】read_code读取C源码和现有代码结构\n2. 【测试设计】在#[cfg(test)]中添加测试用例，覆盖：\n   - 主要功能路径（所有switch分支）\n   - 边界值（0、最大值、负值等）\n   - 错误情况（对应C的unreachable/panic）\n3. 【实现函数】在测试模块外实现pub fn，匹配C的：\n   - 控制流（switch→match）\n   - 类型映射（int→u8/i32/u32）\n   - 错误处理（unreachable!对应unreachable()）\n4. 【验证测试】cargo test确保编译通过，测试覆盖所有分支\n5. 【清理检查】无临时文件，符合项目代码风格\n\n注意事项：\n- Rust无输出捕获API时，测试重点放在函数可调用而非输出验证\n- 保持最小变更，避免引入外部依赖\n- 测试用例必须完备，覆盖所有可能的输入路径\n- 禁止使用todo!/unimplemented!，必须实现完整功能\n\n可选步骤：\n- 如需输出验证，使用管道重定向或集成测试\n- 大型函数可先拆分再转译\n- 复杂类型可考虑创建中间转换层|||"
}