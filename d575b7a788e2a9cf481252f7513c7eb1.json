{
  "problem_type": "代码精简",
  "content": "# 代码精简方法论\n\n## 规则简介\n\n该方法论指导如何安全地删除代码中的冗余功能，简化实现，降低维护成本。适用于移除过时功能、删除复杂逻辑、简化代码结构等场景。\n\n## 你必须遵守的原则\n\n### 1. 明确删除目标原则\n\n**要求说明：**\n\n- **必须**：明确要删除的功能或代码块，理解其作用和依赖关系\n- **必须**：确认删除后不影响核心功能\n- **禁止**：在不理解代码作用的情况下盲目删除\n\n### 2. 安全删除原则\n\n**要求说明：**\n\n- **必须**：采用小步删除，每次只删除一小部分\n- **必须**：每次删除后立即验证功能正常\n- **禁止**：一次性删除大量代码而不验证\n\n### 3. 依赖检查原则\n\n**要求说明：**\n\n- **必须**：检查是否有其他代码依赖被删除的功能\n- **必须**：检查测试文件是否需要更新\n- **禁止**：遗漏依赖关系导致运行时错误\n\n### 4. 文档更新原则\n\n**要求说明：**\n\n- **必须**：更新相关的帮助信息、文档字符串\n- **必须**：移除已删除功能的说明\n- **禁止**：保留误导性的文档信息\n\n## 你必须执行的操作\n\n### 阶段1：分析识别\n\n1. **识别要删除的功能**：明确哪些功能、命令、模块需要删除\n2. **分析依赖关系**：使用搜索工具（rg、grep）查找所有引用\n3. **评估影响范围**：确定修改的文件和可能影响的功能\n4. **制定删除计划**：规划删除步骤，按优先级排序\n\n### 阶段2：执行删除\n\n1. **小步删除**：每次只删除一个功能或一小段代码\n2. **更新文档**：同步更新帮助信息、注释、文档\n3. **语法验证**：使用 `python -m py_compile` 验证语法\n4. **功能验证**：运行测试或手动验证核心功能正常\n\n### 阶段3：清理验证\n\n1. **检查依赖**：确认没有遗漏的依赖引用\n2. **检查测试**：确认测试文件是否需要更新或删除\n3. **提交代码**：提交变更并添加清晰的提交信息\n\n## 实践指导\n\n### 常见删除场景\n\n1. **删除命令功能**：\n   - 移除命令解析逻辑\n   - 移除命令处理函数\n   - 更新命令帮助信息\n\n2. **删除过时功能**：\n   - 识别已废弃的功能标记\n   - 移除相关实现代码\n   - 更新版本说明\n\n3. **简化复杂逻辑**：\n   - 识别可以删除的分支\n   - 合并重复代码\n   - 移除不必要的判断\n\n### 注意事项\n\n- 删除前先备份（使用 git）\n- 保留关键功能的实现\n- 注意异常处理逻辑\n- 检查配置文件、文档、注释\n\n## 检查清单\n\n删除完成后必须确认：\n\n- [ ] 语法检查通过（无编译错误）\n- [ ] 核心功能正常工作\n- [ ] 没有遗留的依赖引用\n- [ ] 帮助信息和文档已更新\n- [ ] 测试文件已更新或删除\n- [ ] 代码已提交到版本控制\n- [ ] 没有临时文件遗留",
  "scope": "global"
}