{
  "problem_type": "UTF字符串字面量测试验证",
  "content": "# UTF-16/UTF-32字符串字面量测试验证方法论\n\n## 问题重述\n验证UTF-16/UTF-32字符串字面量处理是否正确实现，包括编码转换、转义字符、代理对、错误处理和边界情况的测试覆盖。\n\n## 可复用验证流程\n\n### 步骤1: 代码结构检查\n使用read_code读取目标文件，确认以下结构存在：\n- UTF-16字符串处理函数（read_utf16_string_literal）\n- UTF-32字符串处理函数（read_utf32_string_literal）\n- 测试模块包含#[cfg(test)]标记\n- Token结构体包含str_data和ty字段\n\n### 步骤2: 测试用例覆盖验证\n检查测试模块中必须包含的测试用例：\n- 转义字符测试：验证\\\\n, \\\\t, \\\\r, \\\\\\\\, \\\\\\\", \\\\'等转义序列\n- 代理对测试：验证emoji字符(😀😁😂)的UTF-16代理对处理\n- 错误处理测试：验证无效转义序列和未终止转义序列的错误提示\n- 边界情况测试：空字符串、单字符、最大码点字符\n- 编码正确性验证：字节序检查、null终止符验证\n\n### 步骤3: 运行测试验证\n执行命令验证测试通过：\n```bash\ncargo test -- --nocapture 2>/dev/null | grep -A 5 -B 5 \"test result\"\n```\n确认输出显示\"21 passed; 0 failed\"（或类似通过状态）\n\n### 步骤4: 编码正确性验证\n对于每个测试用例，验证：\n- UTF-16：数据长度应为2的倍数，包含正确的代理对格式\n- UTF-32：数据长度应为4的倍数，包含正确的码点值\n- 字节序：使用from_le_bytes()验证小端存储\n- null终止符：最后一个元素为0\n\n## 使用工具\n- read_code：读取源代码文件验证测试用例\n- execute_script：运行cargo test验证测试结果\n- save_memory：保存验证过程中的关键知识\n\n## 注意事项\n1. 代理对范围：高代理0xD800-0xDBFF，低代理0xDC00-0xDFFF\n2. 转义字符必须支持标准C转义序列\n3. 错误消息应包含明确的错误信息和位置提示\n4. 空字符串必须包含null终止符\n5. 所有测试应独立于实现细节，只验证输入输出行为\n\n## 可选扩展\n- 添加性能测试验证大字符串处理\n- 添加内存使用测试验证无内存泄漏\n- 添加跨平台字节序一致性测试"
}