{
  "problem_type": "创建Jarvis规则文件",
  "content": "问题重述：如何创建符合 Jarvis 规范的新规则文件，包括文件位置、命名、格式和变量使用。\n\n可复用解决流程：\n1. 确定规则类型和位置\n   - 内置规则：放置在 builtin/rules/ 目录\n   - 项目规则：放置在 .jarvis/rules/ 目录\n   - 规则文件会被 jinja2 渲染，支持使用模板变量\n\n2. 遵循命名规范\n   - 使用小写字母\n   - 使用下划线 _ 分隔单词\n   - 使用 .md 后缀\n   - 禁止：空格、连字符 - 或大写字母\n   - 示例：code_review.md（正确），CodeReview.md（错误）\n\n3. 编写规则文件结构\n   必须包含以下标准结构：\n   - # 规则标题\n   - ## 简介或背景（可选）\n   - ## 你必须遵守的原则（必需）\n   - ## 你必须执行的操作（必需）\n   - ## 检查清单（可选）\n\n4. 使用 jinja2 变量\n   可用变量：\n   - {{ rule_file_dir }}：当前规则文件所在目录\n   - {{ git_root_dir }}：Git 仓库根目录\n   - {{ current_dir }}：当前工作目录\n   - {{ jarvis_src_dir }}：Jarvis 源码目录\n   - {{ jarvis_data_dir }}：Jarvis 数据目录\n\n5. 关键注意事项\n   - 如果规则文件中需要展示 jinja2 变量作为示例代码，必须使用 {% raw %} 和 {% endraw %} 标签包裹\n   - 错误写法：`{{ git_root_dir }}`\n   - 正确写法：`{% raw %}{{ git_root_dir }}{% endraw %}`\n   - 否则变量会被渲染为实际路径值，而不是显示为示例代码\n\n6. 内容编写规范\n   - 使用清晰、简洁的语言\n   - 使用肯定式表述（\"必须\"、\"禁止\"）\n   - 使用加粗强调关键词（**必须**、**禁止**）\n   - 提供具体的示例代码\n   - 列出必须遵守的要求和禁止事项\n\n7. 验证规则\n   - jarvis rule list：列出所有可用规则\n   - jarvis rule show <rule_name>：查看特定规则内容\n   - 检查清单：文件名规范、UTF-8编码、Markdown格式、jinja2语法正确、结构完整\n\n8. 更新规则列表\n   - 如果是内置规则，更新 builtin_rules.md 添加引用\n   - 格式：### 规则名称\\n\\n规则描述。（{{ rule_file_dir }}/rule_name.md）\n\n最佳实践：\n- 单一职责：每个规则只关注一个主题\n- 可操作性：规则必须具体、可执行\n- 可验证：规则结果必须可检查\n- 简洁明了：避免冗长和重复",
  "scope": "global"
}