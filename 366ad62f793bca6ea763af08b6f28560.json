{
  "problem_type": "Rust函数测试模块位置修复",
  "content": "### 问题重述\nRust函数被错误地放置在`#[cfg(test)] mod tests { ... }`模块内部，导致该函数仅在测试模式下可用，生产代码无法访问。\n\n### 可复用解决流程\n\n1. **问题确认**\n   - 使用`read_code`读取目标文件，确认函数确实位于测试模块内\n   - 检查函数是否有`pub`修饰符（测试模块内的函数即使有pub也仅限测试环境）\n\n2. **位置规划**\n   - 确定函数应该移动到的位置：通常在文件末尾的`#[cfg(test)]`宏之前\n   - 确保移动后函数对所有需要的模块可见\n\n3. **执行迁移**\n   - 使用`edit_file`执行两次操作：\n     * 第一次：在测试模块外插入函数定义\n     * 第二次：从测试模块内删除原函数定义\n   - 保留完整的函数签名、文档注释和实现逻辑\n\n4. **依赖验证**\n   - 检查函数是否使用了测试模块特有的use语句\n   - 如有需要，在函数新位置补充相应的use语句\n\n5. **完整性验证**\n   - 运行`cargo test -- --nocapture`验证所有测试用例通过\n   - 检查是否有测试因函数移动而需要调整可见性\n\n6. **回归检查**\n   - 确认生产代码现在可以正常调用该函数\n   - 验证原有测试用例仍能通过编译和执行\n\n### 注意事项\n- 保持最小变更：仅移动函数位置，不修改实现逻辑\n- 注意命名空间：测试模块内的函数对外部不可见，移动后可能需要调整调用路径\n- 文档完整性：确保移动后函数的文档注释仍然有意义\n- 依赖管理：检查是否引入了循环依赖问题"
}