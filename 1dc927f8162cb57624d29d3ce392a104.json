{
  "problem_type": "大内容处理降级策略",
  "content": "问题重述：\n当处理大量数据或内容时，可能会超出系统限制（如上下文长度、文件大小等），需要实现降级策略以保证系统稳定性，而不是直接报错。\n\n可复用解决流程：\n1. 检测内容大小限制：使用专门的函数（如is_context_overflow）检测内容是否超出限制\n2. 尝试主策略：如果内容过大，首先尝试平台支持的解决方案（如文件上传功能）\n3. 实现降级策略：如果主策略失败或平台不支持，使用降级策略（如仅使用文件列表）\n4. 数据截断处理：在降级策略中对大量数据进行截断显示，避免内容溢出\n5. 保持功能连续性：确保即使在降级模式下也能完成核心功能，而不是直接返回错误\n\n注意事项：\n- 降级策略应保持核心功能可用性\n- 截断显示时应明确告知用户还有其他内容\n- 需要友好的用户提示，说明当前处于降级模式\n\n可选步骤：\n- 根据不同平台能力实现差异化降级策略\n- 记录降级策略使用情况用于后续优化\n- 提供配置选项让用户自定义截断阈值"
}