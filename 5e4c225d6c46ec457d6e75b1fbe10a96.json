{
  "problem_type": "Rust-C代码转译修复",
  "content": "## Rust-C代码转译修复方法论\n\n### 问题重述\n从C源码转译到Rust后，需要修复功能一致性、借用检查器冲突、函数可见性等问题。\n\n### 可复用解决流程\n\n1. **需求分析阶段**\n   - 明确C源码对应函数签名和行为\n   - 识别功能一致性差异（算法差异、边界条件）\n   - 检查函数可见性限制（#[cfg(test)]等属性）\n\n2. **依赖验证阶段**\n   ```bash\n   # 检查被调函数存在性\n   lsp_client search_symbol <函数名> <相关文件>\n   read_code <函数定义文件> <定义行号范围>\n   ```\n\n3. **算法修正阶段**\n   - 用正确的C实现逻辑替换简化算法\n   - 验证参数类型和返回值匹配\n   - 处理可能的类型转换（usize/u32）\n\n4. **借用冲突解决**\n   - 识别&/&mut双重借用场景\n   - 使用临时变量分离借用\n   - 考虑Clone/Copy trait优化\n\n5. **测试验证阶段**\n   ```bash\n   cargo test -- --nocapture\n   ```\n   - 修复失败的测试用例\n   - 调整测试配置避免边界错误\n   - 确保无回归问题\n\n### 注意事项\n- 优先保持函数签名不变，避免API破坏\n- 内联文件模式可简化CTZ相关测试\n- 临时cache变量是解决借用的通用方案\n\n### 可选步骤\n- 创建简化版测试用例规避复杂逻辑\n- 添加详细注释说明与C实现的对应关系"
}