{
  "problem_type": "C到Rust函数转换修复",
  "content": "# C到Rust函数转换修复方法论\n\n## 问题重述\n将C实现的文件系统统计函数转换为Rust时，需要：\n1. 实现真实逻辑而非模拟数据\n2. 处理所有依赖函数\n3. 更新测试用例验证行为而非数值\n4. 保持最小改动原则\n\n## 可复用解决流程\n\n### 步骤1：依赖分析\n- 使用 `read_code` 检查目标函数实现\n- 使用 `lsp_client` 查找所有依赖符号\n- 确认每个依赖函数的已实现状态\n\n### 步骤2：函数实现\n1. **核心逻辑转换**：\n   ```\n   C: int func(args) { ... }\n   Rust: pub fn func() -> Result<Type, Box<dyn Error>>\n   ```\n\n2. **错误处理**：\n   - 使用`Result`替代C的错误码\n   - 通过`map_err`转换具体错误类型\n\n3. **资源管理**：\n   - 使用`?`进行错误传播\n   - 确保资源清理（即使出错）\n\n### 步骤3：测试更新\n- 将硬编码预期值改为行为验证\n- 使用范围检查替代精确值检查\n- 保持测试环境独立性\n\n### 步骤4：验证\n- `cargo test -- --nocapture` 验证所有测试\n- 检查无回归问题\n- 确认编译警告最小化\n\n## 注意事项\n1. 优先使用现有依赖而非新建函数\n2. 保持配置结构体的兼容性（使用`clone_from_ref`）\n3. 测试用例要适应模拟环境限制\n4. 所有修改必须有git提交记录\n\n## 可选步骤\n- 添加详细的中文注释\n- 优化错误消息的用户友好性\n- 补充边界条件测试"
}