{
  "problem_type": "代码模块依赖关系分析",
  "content": "# 代码模块依赖关系分析方法论\n\n## 规则简介\n本方法论提供系统化的代码模块依赖关系分析方法，适用于理解软件系统中模块间的依赖关系、识别关键依赖路径、评估架构复杂度和风险。\n\n## 你必须遵守的原则\n\n### 原则1：基于实际代码\n- **必须**：所有分析结论必须基于实际代码搜索和文件读取结果\n- **必须**：记录所有分析的代码来源（文件路径、行号范围）\n- **禁止**：凭空推测或臆测未验证的依赖关系\n\n### 原则2：双向分析\n- **必须**：分析模块对其他模块的依赖（出度依赖）\n- **必须**：分析其他模块对目标模块的依赖（入度依赖）\n- **必须**：识别双向依赖关系（循环依赖）\n\n### 原则3：依赖程度评估\n- **必须**：对每个依赖关系进行依赖程度评估（高/中/低/无）\n- **必须**：提供依赖程度评估的依据\n- **必须**：识别关键依赖和风险依赖\n\n## 你必须执行的操作\n\n### 阶段1：准备阶段\n1. 确定分析范围：明确目标模块、相关模块、分析深度\n2. 定位关键文件：识别目标模块的源文件、头文件、配置文件\n3. 制定分析计划：规划分析步骤、优先级、时间安排\n\n### 阶段2：出度依赖分析（模块依赖其他模块）\n1. 搜索头文件包含：rg \"^#include.*api\\\\.h\" src/module/ --type c\n2. 分析接口调用：rg \"InterfaceName\" --type c\n3. 评估依赖程度：统计接口数量、分析功能场景\n\n### 阶段3：入度依赖分析（其他模块依赖目标模块）\n1. 搜索反向引用：rg \"target_module_api\\\\.h\" --type c -l\n2. 分析接口使用：识别使用的接口类型和使用场景\n3. 评估被依赖程度：统计依赖模块数量、分析功能场景\n\n### 阶段4：依赖关系汇总\n1. 生成依赖清单：列出所有依赖关系、标注依赖程度\n2. 绘制依赖关系图：使用文本格式绘制依赖关系图\n3. 生成依赖关系矩阵：汇总模块间依赖关系\n\n### 阶段5：风险分析和建议\n1. 识别高风险依赖：深度依赖、双向依赖、平台特定依赖\n2. 提出优化建议：降低依赖复杂度、解耦建议\n\n### 阶段6：生成文档\n文档结构：概述、出度依赖详细分析、入度依赖详细分析、依赖关系汇总、依赖关系图、关键接口说明、代码来源列表、依赖复杂度评估、风险分析和建议\n\n## 依赖程度评估标准\n\n高依赖（⭐⭐⭐⭐⭐）：核心功能深度依赖、接口数量多（>10个）、无法降级\n中依赖（⭐⭐⭐）：部分功能依赖、接口数量适中（5-10个）、可降级\n低依赖（⭐⭐）：少量功能依赖、接口数量少（<5个）、实际调用少\n无依赖（⭐）：仅包含头文件定义、无实际接口调用\n\n## 检查清单\n- [ ] 已分析出度依赖和入度依赖\n- [ ] 已识别双向依赖关系\n- [ ] 已评估所有依赖程度\n- [ ] 已绘制依赖关系图\n- [ ] 已生成依赖关系矩阵\n- [ ] 已识别关键依赖和风险依赖\n- [ ] 已生成完整文档\n- [ ] 所有依赖关系都有代码来源证据",
  "scope": "global"
}