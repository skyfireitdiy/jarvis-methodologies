{
  "problem_type": "C到Rust FFI接口设计",
  "content": "问题重述：\n设计C函数接口供Rust代码通过FFI调用，确保类型安全和内存安全。\n\n可复用解决流程：\n1. 接口分析：识别需要暴露给Rust的C函数和数据结构\n2. 类型映射：确定C类型到Rust类型的安全映射关系\n3. 接口设计：设计简洁、明确的C函数接口\n4. 头文件编写：创建.h文件声明C函数原型\n5. 实现编写：实现C函数逻辑，注意内存管理\n6. Rust绑定：在Rust中声明extern \"C\"函数原型\n7. 安全包装：创建安全的Rust包装函数\n\n注意事项：\n- 使用标准C数据类型以确保ABI兼容性\n- 避免传递复杂的数据结构，优先使用基本类型\n- 正确处理指针和数组的安全性\n- 考虑线程安全问题\n- 在Rust侧验证输入参数的有效性\n\n可选步骤：\n- 使用bindgen自动生成绑定\n- 添加参数验证和错误处理\n- 实现资源的自动释放机制\n- 提供安全的高层API替代低级FFI调用"
}