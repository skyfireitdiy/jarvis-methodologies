{
  "problem_type": "大型初始化函数重构",
  "content": "问题重述：大型初始化函数逻辑复杂，难以维护，需要将相关初始化动作分组提取，提升代码可读性。\n\n可复用解决流程：\n\n1. **理解阶段（RESEARCH）**：\n   - 读取目标函数的完整代码\n   - 分析初始化逻辑的依赖关系和执行顺序\n   - 识别可以分组的逻辑块（基础属性、配置解析、管理器初始化等）\n\n2. **设计阶段（INNOVATION）**：\n   - 确定分组策略：按功能相关性划分\n   - 设计方法命名：_init_xxx（初始化类）或 _ensure_xxx（确保类）\n   - 确保分组后的初始化顺序保持不变\n\n3. **计划阶段（PLAN）**：\n   - 创建任务列表，按优先级排序：\n     - 高优先级：提取核心初始化方法（基础属性、配置解析）\n     - 中优先级：提取管理器、工具确保等方法\n     - 低优先级：添加注释、验证\n   - 明确每个任务的约束和验证标准\n\n4. **执行阶段（EXECUTE）**：\n   - 逐个提取方法（每次只修改一个方法）\n   - 先添加新方法，再修改原函数调用\n   - 添加清晰的分组注释：# ========== 阶段名称 ==========\n   - 使用 git commit 频繁提交，保持可回退\n\n5. **验证阶段（REVIEW）**：\n   - 执行语法检查：python -m py_compile\n   - 确认初始化顺序保持不变\n   - 验证所有原有功能保持完整\n\n注意事项：\n- 保持所有原有功能和逻辑不变，仅重组代码结构\n- 新增方法均为私有方法（以下划线开头），不影响公共接口\n- 保持原有的初始化顺序（依赖关系不能变）\n- 修改后必须能通过语法检查\n- mypy类型检查错误如已存在可忽略，但需确认非本次引入\n\n可选步骤：\n- 如果逻辑非常复杂，可以先备份原文件\n- 可以使用 git diff 查看每次修改的差异\n- 完成后可以对比重构前后的行数变化",
  "scope": "global"
}