{
  "problem_type": "生成版本发布内容（包括Release Note和推广文案）",
  "content": "### 问题重述\n如何基于 Git 仓库中两个版本（如最新 tag 到 HEAD）之间的代码变更，自动生成结构化的 Release Note 和多种风格的推广文案。\n\n### 最优解决方案\n1.  **[可选] 检查工作区状态**: 使用 `execute_script` 工具执行 `git status --porcelain` 检查并确保没有未提交的代码，保证版本历史的准确性。\n2.  **获取最新版本号**: 使用 `execute_script` 工具执行 `git describe --tags \\`git rev-list --tags --max-count=1\\`` 来获取最近的 Git tag 作为比较基准。\n3.  **获取当前日期**: 使用 `execute_script` 工具执行 `date +\"%Y-%m-%d\"` 获取当前日期，用于 Release Note 的标题。\n4.  **获取代码变更详情 (关键步骤)**: 使用 `execute_script` 工具执行 `git diff <tag>..HEAD | cat -` (将 `<tag>` 替换为第二步获取的版本号)。这一步获取的是完整的代码 `diff` 信息。\n5.  **调用AI进行分析和生成**: 将版本号、日期以及上一步获取的完整 `diff` 内容提供给大语言模型，并使用结构化的提示词，要求其完成以下任务：\n    -   分析 `diff` 内容，将变更分类为“新功能”、“修复”、“优化”等。\n    -   根据分类结果，生成指定 Markdown 格式的 Release Note。\n    -   根据发布内容，创作多种不同风格（如专业、活泼、商务）的推广文案。\n\n### 注意事项\n-   **使用 `git diff` 而非 `git log`**: 为了让 AI 能深入理解变更内容，提供完整的 `git diff` 输出远比仅提供 `git log` 的提交信息更有效。这是保证生成内容质量的关键，也是本次任务中得到的宝贵经验。\n-   **上下文窗口限制**: 如果版本间的 `diff` 内容过大，可能会超出模型的上下文窗口限制。在这种情况下，可以考虑使用 `git log --stat` 作为备选方案，但会牺牲内容生成的质量。\n-   **提示词设计**: 生成内容的质量高度依赖于提交给 AI 的提示词。提示词中应包含清晰的格式要求、分类指导和风格示例。"
}