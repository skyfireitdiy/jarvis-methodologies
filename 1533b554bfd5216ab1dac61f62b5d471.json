{
  "problem_type": "生成版本发布内容（包括Release Note和推广文案）",
  "content": "# 问题重述\n如何基于Git仓库自上一个版本（tag）以来的代码变更，自动生成结构化的版本发布说明（Release Note）和多种风格的推广文案。\n\n# 最优解决方案\n1. **检查工作区状态**：使用`execute_script`工具执行`git status --porcelain`命令，检查当前工作区是否有未提交的修改。\n   - 如果有输出，表示存在未提交的修改，可以提示用户或使用`jgc`等自动化工具进行提交，以确保所有变更都包含在内。\n2. **获取最新版本号**：使用`execute_script`工具执行`git describe --tags \\`git rev-list --tags --max-count=1\\``命令，获取最新的git tag作为上一个版本号。\n3. **获取当前日期**：使用`execute_script`工具执行`date +\"%Y-%m-%d\"`命令，获取格式化的当前日期。\n4. **获取代码变更详情**：使用`execute_script`工具执行`git diff <tag>..HEAD | cat -`命令（将`<tag>`替换为步骤2中获取的版本号），获取从上个版本至今的所有代码变更详情。\n5. **综合内容生成**：将获取到的版本号、日期以及完整的代码变更`diff`信息作为上下文，提交给大语言模型进行分析和内容生成。要求模型：\n   - 根据`diff`内容，将其中的变更分类到“新功能”、“修复”、“优化重构”等不同类别下。\n   - 按照指定的Markdown格式生成Release Note。\n   - 基于Release Note的核心内容，创作多种不同风格（如技术、专业、轻松、聚焦痛点等）的朋友圈或社交媒体推广文案。\n\n# 注意事项\n- **环境要求**：执行此流程的目录必须是一个Git仓库。\n- **提交信息质量**：生成内容（尤其是Release Note分类）的准确性高度依赖于`git diff`中包含的提交信息的质量。规范、清晰的Commit Message会带来更好的结果。\n- **无`--oneline`参数**：在获取`git diff`时，不应使用`--oneline`或`--shortstat`等简化参数，需要提供完整的`diff`内容，以便AI能充分理解变更的上下文和具体逻辑。\n- **模型能力**：最后一步的内容生成对大语言模型的归纳、总结和创作能力有较高要求，建议使用能力较强的模型以获得最佳效果。"
}