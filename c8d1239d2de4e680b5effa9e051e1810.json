{
  "problem_type": "间歇性测试失败诊断",
  "content": "问题重述：测试用例时而通过时而失败，难以稳定复现问题根因\n\n可复用解决流程：\n1. **隔离问题**：运行单个失败的测试用例，确认问题是否仍然存在\n2. **添加调试输出**：在关键位置添加 `println!` 或 `dbg!` 输出变量状态\n3. **状态验证**：检查全局状态是否被其他测试污染（如静态变量、文件系统等）\n4. **测试顺序验证**：多次运行完整测试套件，观察失败是否一致\n5. **清理验证**：确保测试前调用状态清理函数（如 `reset_*()`）\n6. **环境验证**：确认测试环境一致性（文件权限、临时目录等）\n\n注意事项：\n- 调试输出应在修复后移除\n- 检查测试间的共享资源使用\n- 考虑使用 `cargo test -- --test-threads=1` 减少并发影响\n- 使用临时文件时应确保唯一性和清理\n\n可选步骤：\n- 对于并发相关的失败，考虑使用线程安全的测试数据\n- 对于文件系统相关的失败，使用内存文件系统或临时目录"
}