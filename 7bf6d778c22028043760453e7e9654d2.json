{
  "problem_type": "优化Rust单元测试质量",
  "content": "# 优化Rust单元测试质量方法论\n\n## 适用场景\n- Rust项目中测试用例质量不达标\n- 存在无效测试用例（仅测试辅助函数）\n- 需要为特定函数设计高质量测试用例\n\n## 解决流程\n\n### 1. 现状分析阶段\n- 使用`execute_script`搜索目标函数：`find . -name \\\"*.rs\\\" -exec grep -l \\\"fn 目标函数名\\\" {} \\\\;`\n- 使用`read_code`读取目标函数及其测试用例\n- 识别测试用例问题类型：\n  - 仅测试辅助函数而非目标函数\n  - 缺乏边界情况测试\n  - 存在无限循环风险\n  - 测试命名不清晰\n\n### 2. 设计阶段\n- **有效测试用例设计原则**：\n  - 直接调用目标函数进行测试\n  - 覆盖成功路径、失败路径、边界情况\n  - 使用有意义的测试函数命名\n- **测试场景设计**：\n  - 正常输入输出验证\n  - 错误输入处理\n  - 空值/边界值处理\n  - 异常情况处理\n\n### 3. 实施阶段\n- 使用`edit_file`移除无效测试用例\n- 使用`edit_file`或`rewrite_file`添加新的有效测试用例\n- 确保测试用例使用项目统一的代码风格\n- 添加清晰的中文注释说明测试目的\n\n### 4. 验证阶段\n- 运行测试确保无语法错误\n- 验证测试覆盖核心功能\n- 检查是否存在无限循环风险\n\n## 注意事项\n- 保持最小修改原则，仅修改测试相关代码\n- 使用桩实现时确保测试能够正常终止\n- 遵循项目的命名规范和代码风格\n- 如无特殊要求，使用中文注释提高可读性\n\n## 关键技巧\n- 对于链表遍历类函数：使用受控的桩实现避免无限循环\n- 对于错误场景：使用`matches!`宏验证错误类型\n- 对于内存相关测试：使用静态缓冲区避免内存泄漏"
}