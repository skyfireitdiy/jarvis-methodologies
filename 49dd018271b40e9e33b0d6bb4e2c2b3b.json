{
  "problem_type": "修复Rust测试用例失败",
  "content": "# 修复Rust测试用例失败的方法论\n\n## 问题重述\n当`cargo test`显示测试失败时，需要系统化地分析并修复失败的测试用例，确保所有测试通过。\n\n## 可复用解决流程\n\n### 步骤1: 收集失败信息\n1. 执行完整测试：`cargo test -- --nocapture`\n2. 识别失败测试名称和错误类型\n3. 记录panic消息和期望/实际差异\n\n### 步骤2: 分类测试失败类型\n- **编译错误**: 语法、类型、依赖问题\n- **panic错误**: 缺少should_panic属性或异常消息不匹配\n- **断言失败**: 期望值计算错误\n- **边界条件**: 整数溢出、空值处理等\n\n### 步骤3: 分析具体测试\n1. 使用`read_code`读取失败测试代码\n2. 检查测试属性是否完整（特别是`#[should_panic]`)\n3. 验证断言期望值的计算逻辑\n4. 对比C实现与Rust实现的差异\n\n### 步骤4: 实施修复\n1. **panic测试失败**:\n   - 添加/修正`#[should_panic(expected = \"...\")]`属性\n   - 确保期望消息与实际panic消息完全匹配\n\n2. **断言失败**:\n   - 使用wrapping arithmetic验证边界条件\n   - 修正期望值计算\n   - 确保测试描述与实际行为一致\n\n3. **边界条件**:\n   - 使用`wrapping_add`、`wrapping_sub`处理整数溢出\n   - 明确注释边界行为\n\n### 步骤5: 验证修复\n1. 运行特定测试：`cargo test 测试名称`\n2. 运行完整测试套件：`cargo test`\n3. 确保无编译警告：`cargo check`\n4. 确保无clippy警告：`cargo clippy -- -D warnings`\n\n## 注意事项\n- 保持最小改动原则\n- 测试属性必须精确匹配实际行为\n- 边界测试需明确注释wrapping行为\n- 修复后必须验证所有测试，防止回归问题\n\n## 可选步骤\n- 为复杂边界条件添加额外测试用例\n- 更新测试文档注释\n- 添加调试输出验证中间状态"
}