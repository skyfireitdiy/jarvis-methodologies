{
  "problem_type": "Rust重复定义修复",
  "content": "# Rust重复定义修复方法论\n\n## 问题重述\n在Rust项目中，由于代码生成、合并冲突或复制粘贴操作，可能导致函数、结构体、测试模块等符号被重复定义，引发编译错误（E0428: duplicate definition）。\n\n## 可复用解决流程\n\n### 步骤1：问题确认\n```bash\n# 快速定位重复定义\ngrep -n \"pub fn 函数名\" src/**/*.rs\ngrep -n \"struct 结构体名\" src/**/*.rs\ngrep -n \"mod 模块名\" src/**/*.rs\n\n# 检查编译错误\ncargo check 2>&1 | grep -E \"duplicate|redefinition|E0428\"\n```\n\n### 步骤2：范围确定\n1. 使用git diff查看变更范围\n2. 确认需要保留的定义（通常是最早的/最完整的）\n3. 记录需要删除的行号范围（审查报告通常提供）\n\n### 步骤3：精确删除\n```bash\n# 备份文件\ncp 目标文件.rs 目标文件.rs.backup\n\n# 使用sed精确删除（如删除271-458行）\nsed -i '271,458d' 目标文件.rs\n```\n\n### 步骤4：验证修复\n```bash\n# 验证编译通过\ncargo check\n\n# 验证所有测试通过\ncargo test -- --nocapture\n\n# 验证无新警告\ncargo clippy -- -D warnings\n```\n\n## 注意事项\n1. **保留最早定义**：通常保留文件开头最早的定义，删除后续重复\n2. **测试完整性**：确保删除重复后，相关的测试模块仍完整保留\n3. **依赖检查**：确认被删除的定义没有被其他代码依赖\n4. **提交前清理**：删除备份文件，确保git历史清晰\n\n## 可选步骤\n- 使用`cargo fix --lib -p 包名 --tests`自动修复简单警告\n- 对大型文件使用`split -l 1000`分段处理避免内存问题\n- 使用`diff -u`对比修改前后差异"
}