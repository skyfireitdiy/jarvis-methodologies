{
  "problem_type": "CLI参数迁移",
  "content": "# CLI参数迁移方法论\n\n## 规则简介\n\n将配置项从配置文件迁移到命令行参数的标准化流程，确保向后兼容性、用户体验和代码质量。\n\n## 你必须遵守的原则\n\n### 参数设计原则\n\n**要求说明：**\n\n- **必须**：使用反向逻辑参数（如 `--skip-x` 而不是 `--enable-x`）来保持默认行为不变\n- **必须**：提供短参数（如 `-S`）和长参数（如 `--skip-config-selector`）两种形式\n- **必须**：命令行参数优先级高于配置文件中的设置\n- **禁止**：改变原有默认行为，除非明确需要\n\n### 代码重构原则\n\n**要求说明：**\n\n- **必须**：在函数签名中添加新参数，并提供合理的默认值\n- **必须**：从配置文件读取函数中删除相关逻辑\n- **必须**：更新所有函数调用点，传递新参数\n- **禁止**：保留已废弃的配置读取函数\n- **禁止**：在非交互模式下仍要求用户输入\n\n### 文档同步原则\n\n**要求说明：**\n\n- **必须**：更新使用指南文档，说明新参数用法\n- **必须**：更新快速开始文档，反映参数变更\n- **必须**：在配置文件示例中移除已废弃的配置项\n- **禁止**：文档与代码实现不一致\n\n## 你必须执行的操作\n\n### 阶段1：准备工作\n\n1. **分析影响范围**：识别使用该配置项的所有代码位置\n2. **确认默认行为**：确定新实现应保持的默认行为\n3. **设计参数名称**：创建合适的命令行参数名称\n\n### 阶段2：代码重构\n\n1. **删除配置读取函数**：从配置文件中删除相关读取函数\n2. **修改函数签名**：在目标函数中添加新参数\n3. **更新函数调用**：在所有调用点传递新参数\n4. **添加命令行参数**：在CLI入口处添加typer参数定义\n5. **更新逻辑判断**：将配置文件检查改为参数检查\n\n### 阶段3：文档更新\n\n1. **更新使用指南**：修改CLI参数相关说明\n2. **更新快速开始**：反映配置项迁移的变更\n3. **修改配置示例**：从示例中移除已废弃的配置项\n\n### 阶段4：验证测试\n\n1. **功能测试**：验证新参数能正确控制功能行为\n2. **默认行为测试**：确认默认行为与迁移前保持一致\n3. **非交互模式测试**：验证非交互模式下参数是否正确生效\n4. **文档验证**：确认文档与实现一致\n\n## 实践指导\n\n- 在非交互模式下应自动跳过交互式功能\n- 使用类型注解明确参数类型\n- 添加清晰的文档字符串说明参数用途\n- 遵循CLI工具的最佳实践，如参数命名约定\n\n## 检查清单\n\n- [ ] 配置文件中的读取函数已删除\n- [ ] 函数签名已更新并添加参数\n- [ ] 所有调用点已更新参数传递\n- [ ] CLI参数定义已添加\n- [ ] 逻辑判断已从配置检查改为参数检查\n- [ ] 文档已同步更新\n- [ ] 默认行为保持不变\n- [ ] 非交互模式下自动应用合适行为\n- [ ] 功能测试验证通过",
  "scope": "global"
}