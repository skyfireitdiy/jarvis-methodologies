{
  "problem_type": "模块重构",
  "content": "问题重述：\n需要对大型模块进行重构，将其拆分为多个职责单一的子模块，提升代码可维护性和可读性。\n\n可复用解决流程：\n1. 重构前分析\n   - 使用 read_code 工具分析原模块代码结构和功能分布\n   - 识别可拆分的功能模块和职责边界\n   - 评估模块行数、复杂度和耦合度\n\n2. Spec文档编写\n   - 按照SDD流程，编写详细的模块拆分Spec文档\n   - 定义每个新模块的职责、接口和功能边界\n   - 明确模块间的依赖关系和交互方式\n   - 制定重构验收标准\n\n3. 测试用例编写\n   - 使用TDD方法，先编写测试用例覆盖所有功能\n   - 包括正常情况、边界条件、异常处理的测试\n   - 确保测试覆盖率>=80%\n\n4. 模块拆分实现\n   - 按照单一职责原则创建新模块\n   - 每个新模块代码行数<1000行\n   - 实现原模块功能的逐步迁移\n\n5. 协调器重构\n   - 将原模块重构为协调器\n   - 调用新模块实现功能\n   - 保持原有接口和功能行为不变\n\n6. 验证测试\n   - 运行所有测试用例确保通过\n   - 验证功能行为与重构前一致\n   - 检查代码行数是否符合要求\n\n注意事项：\n- 严格遵循TDD（测试驱动开发）方法，先写测试后实现\n- 遵循SDD（Spec驱动开发）流程，基于Spec文档进行重构\n- 保持原有功能不变，确保所有测试通过\n- 每次改动后立即验证，小步快跑\n- 每个新模块遵循单一职责原则\n\n可选步骤：\n- 如果模块特别复杂，可以分阶段进行重构\n- 重构过程中使用版本控制记录每步的改变\n- 重构完成后进行代码审查",
  "scope": "global"
}