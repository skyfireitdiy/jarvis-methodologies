{
  "problem_type": "Rust转义字符解析器实现",
  "content": "方法名称：Rust中实现C标准转义字符解析的完整流程\n\n问题重述：在Rust中实现一个符合C标准的转义字符解析器，需要支持标准转义字符、八进制转义、十六进制转义和Unicode转义序列，并提供完整的错误处理和单元测试。\n\n可复用解决流程：\n\n1. 需求分析与规格定义\n   - 明确支持的转义序列类型（标准C转义、八进制\\ooo、十六进制\\xhh、Unicode\\uXXXX）\n   - 定义错误类型和边界条件\n   - 确定输入输出格式（UTF-8字符串输入，字符向量输出）\n\n2. 架构设计\n   - 创建专门的错误枚举类型EscapeError\n   - 实现Error trait和Display trait用于错误格式化\n   - 设计纯函数式API：parse_escape_sequences(input) -> Result<Vec<char>, EscapeError>\n\n3. 核心实现步骤\n   - 使用字符迭代器遍历输入字符串\n   - 当遇到反斜杠'\\'时进入转义处理逻辑\n   - 使用match表达式处理不同类型的转义序列\n   - 对八进制转义：解析1-3位八进制数字（0-7）\n   - 对十六进制转义：解析1+位十六进制数字（0-9, a-f, A-F）\n   - 对Unicode转义：精确解析4位十六进制数字，验证Unicode标量值范围\n\n4. 安全性处理\n   - 验证所有数值转换的边界条件\n   - 使用char::from_u32进行安全的Unicode字符创建\n   - 检查Unicode标量值不超过0x10FFFF\n   - 处理输入结束符缺失等边界情况\n\n5. 测试策略\n   - 为每种转义类型创建独立测试函数\n   - 覆盖正常情况、边界值和错误路径\n   - 包含UTF-16编码测试验证编码正确性\n   - 测试空字符串、单字符、复杂组合情况\n\n6. 集成与扩展\n   - 实现UTF-16编码函数encode_utf16用于下游处理\n   - 支持BMP字符和辅助平面字符的代理对处理\n   - 保持与现有代码风格一致的无外部依赖设计\n\n注意事项：\n- 避免使用unwrap，始终使用模式匹配处理Option/Result\n- 十六进制转义应支持可变长度（1位及以上）\n- Unicode转义必须严格为4位十六进制\n- 八进制转义最多支持3位数字\n- 避免外部依赖，仅使用Rust标准库\n\n工具使用：\n- 使用cargo test进行测试验证\n- 使用clippy检查代码质量\n- 使用read_code查看实现代码\n- 使用execute_script运行测试套件"
}