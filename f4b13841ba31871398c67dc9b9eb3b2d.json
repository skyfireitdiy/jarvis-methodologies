{
  "problem_type": "C到Rust代码迁移修复",
  "content": "# C到Rust代码迁移修复方法论\n\n## 问题重述\n当需要将C代码迁移到Rust时，常见问题包括：\n- 指针操作不安全\n- 链表遍历逻辑不完整\n- 缺失的辅助函数和常量\n- 状态机实现简化\n- 字节序处理问题\n\n## 可复用解决流程\n\n### 阶段1：需求分析\n1. **识别目标函数**：使用 `lsp_client` 定位Rust函数\n2. **获取C参考**：使用 `read_code` 读取原始C实现\n3. **差异分析**：对比C和Rust实现的差异\n\n### 阶段2：依赖补齐\n1. **识别缺失符号**：检查编译错误和未定义符号\n2. **实现辅助函数**：\n   - 在合适模块添加缺失函数（如utils.rs）\n   - 补充必要的常量定义\n   - 确保所有依赖完整\n\n### 阶段3：核心修复\n1. **链表遍历**：移除break语句，实现完整遍历\n2. **状态机实现**：补全所有状态分支\n3. **安全检查**：避免空指针解引用\n4. **字节序处理**：实现必要的字节序转换函数\n\n### 阶段4：验证\n1. **编译验证**：确保无编译错误\n2. **测试验证**：运行 `cargo test -- --nocapture`\n3. **功能验证**：确认所有测试通过\n\n## 注意事项\n- 保持最小改动，避免大范围重构\n- 优先修复严重问题（如空指针风险）\n- 确保测试完整性，避免回归问题\n- 使用类型安全的Rust模式替代不安全的C模式\n\n## 可选步骤\n- 添加详细的错误处理\n- 优化内存使用模式\n- 完善文档注释"
}