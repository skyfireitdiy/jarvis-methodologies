{
  "problem_type": "Typer CLI参数可选化改造",
  "content": "## 问题重述\n将Typer CLI工具中的必选命令行参数改为可选参数，当用户未提供时通过交互式提示输入。\n\n## 可复用解决流程\n\n### 步骤1：定位参数定义\n找到需要修改的参数定义位置，通常在函数签名的@app.command()装饰器下。\ndef my_command(\n    param1: str = typer.Option(..., \"--param1\", \"-p\", help=\"参数说明\"),\n    # ...\n):\n    pass\n\n### 步骤2：修改参数类型和默认值\n将必选参数改为可选：\n- 将默认值从...改为None\n- 将类型注解从str改为Optional[str]\n\n修改前:\nparam1: str = typer.Option(..., \"--param1\", \"-p\", help=\"参数说明\")\n\n修改后:\n  param1: Optional[str] = typer.Option(None, \"--param1\", \"-p\", help=\"参数说明\")\n\n### 步骤3：添加交互式提示逻辑\n在函数开始处添加参数检查和提示：\ndef my_command(\n    param1: Optional[str] = typer.Option(None, \"--param1\", \"-p\", help=\"参数说明\"),\n):\n    命令描述\n   \n    # 提示用户输入缺失的参数\n  if param1 is None:\n        param1 = Prompt.ask(\"请输入参数值\")\n   \n    # 后续逻辑...\n\n### 步骤4：确保导入正确\n确保已导入Optional和Prompt：\nfrom typing import Optional\nfrom rich.prompt import Prompt\n\n## 注意事项\n1. 类型安全：修改类型注解为Optional[str]后，后续使用参数时需考虑可能为None的情况\n2. 提示信息：Prompt.ask()的提示信息应清晰明确，最好包含参数要求（如可选值范围）\n3. 参数验证：在获取用户输入后，应添加适当的验证逻辑（如格式、范围检查）\n4. 向后兼容：确保从命令行提供参数时，原有功能不受影响\n\n## 可选步骤\n- 如果参数有默认值，可以同时提供默认值选项：\n  param1: Optional[str] = typer.Option(None, \"--param1\", \"-p\", help=\"参数说明\")\n \n  if param1 is None:\n      param1 = Prompt.ask(\"请输入参数值\", default=\"默认值\")\n- 对于多参数情况，考虑是否需要提供\"--interactive\"或-i选项，让用户选择交互式模式",
  "scope": "global"
}