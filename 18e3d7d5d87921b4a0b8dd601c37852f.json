{
  "problem_type": "批量优化提示词",
  "content": "# 批量优化提示词方法论\n\n## 问题重述\n需要同时优化多个文件中的提示词内容，确保所有文件保持一致的风格、结构和优化内容，同时保持小步提交策略以确保可回退。\n\n## 可复用解决流程\n\n### 步骤1：分析参考文件\n1. 读取已经优化完成的参考文件（如 code_agent_prompts.py）\n2. 识别需要保持一致的关键内容：\n   - 元指令和结构\n   - 任务复杂度判断标准\n   - 各阶段的简化流程说明\n   - 规则缓存和失败处理机制\n3. 记录需要优化的具体章节和位置\n\n### 步骤2：读取目标文件\n1. 读取需要优化的目标文件（如 jarvis_agent/__init__.py）\n2. 定位对应章节的位置\n3. 对比参考文件，识别需要修改的部分\n\n### 步骤3：制定优化计划\n1. 将优化任务拆分为独立的小步骤：\n   - 元指令部分优化\n   - 各阶段章节优化（ANALYZE、RULE、COLLECT、EXECUTE、REVIEW）\n   - 强制约束部分优化\n2. 确保每个步骤都是独立的，可以单独验证\n\n### 步骤4：执行优化（小步提交）\n1. 按照计划逐个执行修改，每次只修改一个章节\n2. 使用 edit_file 工具进行精确修改\n3. 每次修改后自动提交，确保可回退\n4. 等待静态检查通过后再进行下一步\n\n### 步骤5：验证一致性\n1. 读取所有修改后的文件\n2. 对比关键章节，确保：\n   - 风格一致\n   - 结构一致\n   - 内容一致\n3. 检查是否遗漏任何优化点\n\n### 步骤6：审查和保存记忆\n1. 确认所有修改符合要求\n2. 保存关键信息到记忆系统\n3. 创建或更新相关方法论\n\n## 注意事项\n1. **小步提交**：每次只修改一个章节，确保可回退\n2. **精确匹配**：使用 edit_file 时提供足够的上下文，确保唯一匹配\n3. **风格一致**：保持与参考文件的格式、缩进、标点符号一致\n4. **避免臆测**：所有修改必须基于实际读取的内容，禁止猜测\n5. **验证通过**：每步修改后都要通过静态检查\n\n## 可选步骤\n- 如果修改涉及复杂的规则系统，可以创建专门的规则文件\n- 如果需要批量处理多个文件，可以考虑使用 task_list_manager 进行任务拆分\n- 如果优化涉及核心工作流，建议先在测试文件中验证效果",
  "scope": "global"
}