{
  "problem_type": "使用objcopy删除ELF文件特定节",
  "content": "## ELF节删除方法论\n\n### 问题重述\n需要从ELF格式的二进制文件（如Rust动态库）中删除特定节（如.rustc节），减小文件大小并优化发布版本，同时确保操作安全可逆。\n\n### 可复用解决流程\n\n#### 步骤1: 环境检查\n- 确认objcopy工具可用：`which objcopy`\n- 确认readelf工具可用：`which readelf`\n\n#### 步骤2: 节存在性验证\n```bash\nreadelf -S <input_file> | grep -i <section_name>\n```\n预期输出应显示目标节的信息（节号、偏移、大小等）\n\n#### 步骤3: 创建备份（安全可逆）\n```bash\ncp <input_file> <input_file>.backup\n```\n\n#### 步骤4: 执行节删除\n```bash\nobjcopy --remove-section <section_name> <input_file> <output_file>\n```\n注意：禁止直接覆盖原始文件，必须创建新文件\n\n#### 步骤5: 验证删除结果\n```bash\n# 验证节已删除\nreadelf -S <output_file> | grep -i <section_name>\n# 应无输出（节不存在）\n\n# 验证文件大小变化\nls -l <input_file> <output_file>\n# strip后文件应小于原始文件\n```\n\n#### 步骤6: 功能验证\n- 确保strip后的文件可正常链接\n- 运行测试程序验证功能完整性\n- 对比原始和strip版本的运行结果\n\n### 注意事项\n1. **禁止覆盖原始文件**：必须创建新文件进行strip操作\n2. **保留原始文件**：作为备份，确保操作可逆\n3. **验证必要性**：仅当目标节存在时才执行删除操作\n4. **兼容性检查**：确认删除特定节不会影响程序功能\n5. **安全标准**：strip后的文件必须通过所有功能测试\n\n### 可选步骤\n- 使用`--strip-all`进一步减小文件大小（可能影响调试信息）\n- 使用`--strip-debug`仅删除调试信息\n- 创建自动化脚本批量处理多个文件\n- 集成到CI/CD流程中自动优化发布版本"
}