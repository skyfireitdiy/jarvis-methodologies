{
  "problem_type": "Rust测试模块优化",
  "content": "# Rust测试模块优化方法论\n\n## 问题重述\n针对代码审查中发现的测试问题：\n1. 测试用例不完备（缺少边界情况测试）\n2. 测试代码重复（多个测试共用相同设置逻辑）\n\n## 可复用解决流程\n\n### 步骤1：分析现有测试结构\n使用工具：\n- `read_code` 读取测试模块完整内容\n- 识别重复的设置代码模式\n- 标记缺失的边界测试场景\n\n### 步骤2：创建测试辅助函数\n创建格式：\n```rust\n/// 创建测试用的[功能描述]\n/// \n/// 返回 [返回值描述]\nfn create_test_[功能名]([参数列表]) -> [返回类型] {\n    [通用设置逻辑]\n}\n```\n\n### 步骤3：重构现有测试\n替换模式：\n- 将重复代码替换为辅助函数调用\n- 保持原有断言不变\n- 确保测试语义完全一致\n\n### 步骤4：添加边界测试\n标准边界测试类型：\n1. **错误处理测试**：模拟IO错误、无效输入\n2. **边界值测试**：最大值、最小值、零值\n3. **性能边界测试**：大输入、极限情况\n\n### 步骤5：验证完整性\n验证清单：\n- [ ] 所有现有测试仍然通过\n- [ ] 新增边界测试覆盖审查要求\n- [ ] 代码冗余显著减少\n- [ ] 测试可读性提升\n\n## 注意事项\n1. 保持最小改动，不引入新功能\n2. 测试函数命名保持语义清晰\n3. 边界测试用例需有明确预期\n4. 大输入测试要控制资源消耗\n\n## 可选步骤\n- 添加测试文档注释\n- 创建测试工具模块\n- 设置测试性能基准"
}