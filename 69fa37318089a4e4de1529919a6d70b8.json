{
  "problem_type": "C编译器解析模块修复",
  "content": "# C编译器解析模块修复方法论\n\n## 问题重述\n修复C编译器解析模块中的功能一致性问题，包括：\n1. 函数体解析不完整\n2. 初始化器解析缺失\n3. 函数指针处理不完整\n4. 数组越界风险\n\n## 可复用解决流程\n\n### 阶段1：问题识别与定位\n1. **使用read_code**读取目标文件关键区域\n2. **使用lsp_client**定位相关符号和引用\n3. **对比C源码**确定缺失功能点\n\n### 阶段2：最小必要修复\n1. **边界检查修复**\n   - 将`pos > 0 && pos <= tok.len()`改为`pos > 0 && pos - 1 < tok.len()`\n  \n2. **函数体解析增强**\n   - 保持现有大括号匹配逻辑\n   - 添加位置追踪确保完整跳过\n   - 不破坏现有测试用例\n\n3. **初始化器解析增强**\n   - 添加初始化器数据结构(Initializer enum)\n   - 实现基本表达式解析能力\n   - 支持数组和标量初始化\n\n4. **函数指针处理增强**\n   - 扩展参数列表解析\n   - 支持复杂嵌套声明\n   - 保持类型系统兼容性\n\n### 阶段3：验证与清理\n1. **运行cargo test -- --nocapture**验证所有测试\n2. **检查回归问题**确保188个测试用例通过\n3. **清理未使用代码**移除临时调试函数\n4. **验证构建**确保cargo build无警告\n\n## 注意事项\n- 优先修复严重问题(边界检查)，再修复功能一致性\n- 每次修改后必须运行完整测试套件\n- 禁止引入todo!/unimplemented!占位符\n- 保持中文注释规范\n\n## 可选步骤\n- 如需增强功能，可逐步引入完整AST节点\n- 可添加更多初始化器类型支持\n- 可扩展复杂类型声明处理"
}