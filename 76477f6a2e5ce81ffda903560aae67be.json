{
  "problem_type": "C到Rust函数字节级转译测试",
  "content": "# C到Rust函数字节级转译测试方法论\n\n## 问题重述\n将C语言函数完整转译为Rust实现，确保行为完全一致，包括错误处理、内存管理和边界情况。\n\n## 可复用解决流程\n\n### 阶段1：分析阶段\n1. **读取C源码**：使用`read_code`获取原始C函数完整实现\n2. **符号分析**：使用`read_symbols`获取函数签名、引用关系\n3. **行为确认**：确认C实现的错误处理机制（panic vs 返回值）\n\n### 阶段2：转译阶段\n1. **类型映射**：建立C类型到Rust类型的精确映射\n   - `Type *` → `Option<Box<Type>>`\n   - `char *` → `String` 或 `&str`\n   - `void` → `()` 或 `Result<(), Error>`\n2. **错误处理转换**：\n   - 如果C使用`error_tok`+exit → Rust使用panic\n   - 如果C返回错误码 → Rust使用Result\n3. **递归处理**：保持C的递归调用顺序和边界条件\n\n### 阶段3：测试阶段\n1. **测试用例调整**：\n   - panic场景使用`#[should_panic]`\n   - 返回值场景保持`assert!`断言\n2. **字段初始化**：使用Rust类型的正确默认值\n   - 空Vec：使用`Vec::new()`\n   - 空Option：使用`None`\n   - 数字默认值：使用`0`、`false`等\n\n### 阶段4：验证阶段\n1. **编译验证**：`cargo check --message-format=short`\n2. **测试验证**：`cargo test -- --nocapture`\n3. **警告清理**：`cargo clippy -- -D warnings`\n\n## 注意事项\n- 必须处理所有重复定义（E0428）\n- 必须修正所有类型不匹配（E0308）\n- 必须验证测试用例的行为匹配原始C实现\n- 修复后必须运行完整测试套件，不能只看单个测试\n\n## 可选步骤\n- 添加调试输出辅助定位问题\n- 使用`git diff`确认变更范围\n- 保留关键注释说明转译差异"
}