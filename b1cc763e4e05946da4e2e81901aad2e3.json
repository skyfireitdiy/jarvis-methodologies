{
  "problem_type": "栈内存管理与安全初始化",
  "content": "# 栈内存安全初始化方法论\n\n## 问题场景\n当涉及栈内存管理时，需平衡安全性(溢出检测)与性能(初始化开销)，特别关注：\n- 不同规模的栈空间处理(常规栈 vs 超大栈)\n- 内存映射策略优化\n- 安全检测机制的有效性\n\n## 解决方案步骤\n1. **需求评估**：\n   - 使用`retrieve_memory`检索[\"栈内存\",\"内存管理\"]相关记忆\n   - 确定栈的典型大小范围和安全级别要求\n\n2. **初始化策略选择**：\n   - <128KB栈：完全初始化(保证安全)\n   - >256MB栈：\n     * 仅初始化边界区域(头尾各4KB)\n     * 使用`madvise`控制物理内存分配\n     * 通过`execute_script`调用系统内存管理API\n\n3. **性能优化验证**：\n   - 用`execute_script`运行基准测试\n   - 监控实际内存使用量\n\n4. **安全机制集成**：\n   - 实现统一的`get_used_size()`检测\n   - 通过`edit_file`注入边界检查代码\n\n## 注意事项\n- 内核版本影响：不同系统对`madvise`的实现差异\n- ARM架构需要调整对齐方式\n- 避免在实时性要求极高的场景使用全量初始化\n\n## 变体方案\n- 调试模式：强制完全初始化+详细日志\n- 生产环境：部分初始化+硬件辅助检测"
}