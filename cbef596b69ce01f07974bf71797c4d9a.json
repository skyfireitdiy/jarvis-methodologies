{
  "problem_type": "C函数到Rust移植（TDD方法）",
  "content": "问题重述：将单个C函数移植为等价的Rust实现，保持行为一致性\n\n解决流程：\n1. 分析阶段\n   - 读取C源码理解函数逻辑和依赖关系\n   - 识别全局状态、边界条件、错误处理\n   - 确定Rust等价API和类型映射\n\n2. Red阶段（测试编写）\n   - 基于C行为设计测试用例（主要路径+边界条件）\n   - 覆盖：空输入、极值、错误场景、全局状态影响\n   - 测试命名清晰表达测试意图\n\n3. Green阶段（实现）\n   - 实现函数签名：使用Rust原生类型（&str、Option<T>等）\n   - 保持最小实现使测试通过\n   - 处理Rust特有的安全性要求（越界、空指针等）\n\n4. 验证与重构\n   - 运行cargo test确保全部测试通过\n   - 修复测试中发现的问题（如越界保护）\n   - 保持代码简洁，避免过度工程化\n\n注意事项：\n- 禁止修改C常量值\n- 使用标准库代替C库函数\n- 全局状态通过Mutex/Lazy包装\n- 资源释放通过RAII自动管理\n- 测试用例优先修复而非删除"
}