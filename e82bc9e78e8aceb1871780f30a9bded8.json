{
  "problem_type": "Rust内存错误调试修复",
  "content": "# Rust内存错误调试修复方法论\n\n## 适用场景\n- SIGSEGV/SIGABRT等段错误\n- `free(): invalid pointer`等内存释放错误\n- 悬垂指针/重复释放/内存泄漏\n\n## 解决流程\n\n### 1. 快速定位阶段\n- **工具**：`execute_script` + `timeout`\n- **命令**：`timeout 30 cargo test -- --nocapture`\n- **目标**：快速确认是构建错误还是运行时错误\n\n### 2. 精准定位阶段\n- **单测隔离**：`cargo test <测试名> -- --nocapture`\n- **Valgrind分析**：`valgrind --tool=memcheck cargo test <测试名>`\n- **LLDB调试**：`lldb -- cargo test <测试名>`\n\n### 3. 代码分析阶段\n- **符号分析**：`lsp_client`查询相关符号定义和引用\n- **文件读取**：`read_code`查看关键函数实现\n- **依赖追踪**：检查指针生命周期的所有路径\n\n### 4. 修复策略选择\n- **悬垂指针**：改为返回值语义，避免修改输入参数\n- **临时指针存储**：改为堆分配，转移所有权\n- **重复释放**：确保每个分配只有唯一释放路径\n\n### 5. 验证阶段\n- **单元测试**：确保修复的测试通过\n- **回归测试**：全量测试确保无新问题\n- **内存验证**：Valgrind确认无内存错误\n\n## 关键原则\n- 最小化修改：只修内存问题，不改业务逻辑\n- 所有权明确：每个内存块有明确的所有者\n- 生命周期清晰：避免跨作用域指针引用"
}