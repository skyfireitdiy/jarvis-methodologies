{
  "problem_type": "规则列表验证",
  "content": "# 规则列表验证方法论\n\n## 问题重述\n在开发过程中，规则列表文件（如 builtin_rules.md）可能因为新增、删除或移动规则文件而与实际文件结构不一致。需要定期验证规则列表的准确性。\n\n## 可复用解决流程\n\n### 步骤1：收集实际文件列表\n使用 find 命令获取规则目录下的所有规则文件：\n```bash\nfind <rules_directory> -type f -name '*.md' | sort\n```\n\n### 步骤2：读取规则列表文件\n使用 read_code 工具读取规则列表文件（如 builtin_rules.md）\n\n### 步骤3：对比验证\n对比实际文件列表与规则列表文件中引用的文件：\n- 确认所有实际存在的文件都在列表中被引用\n- 确认列表中的所有文件都实际存在\n- 检查文件路径格式是否正确（如模板变量使用）\n\n### 步骤4：检查模板变量\n确认规则列表中使用的模板变量格式正确：\n- 文件路径使用 `{{ rule_file_dir }}` 等模板变量\n- 变量名称与系统支持的一致（current_dir, git_root_dir, jarvis_src_dir, jarvis_data_dir, rule_file_dir）\n\n### 步骤5：更新规则列表（如需要）\n如果发现不一致：\n- 使用 edit_file 工具精确修改规则列表\n- 保持原有的格式和结构\n- 添加缺失的规则引用\n- 删除已废弃的规则引用\n\n## 注意事项\n- 规则列表文件通常位于规则目录的根目录（如 builtin/rules/builtin_rules.md）\n- 规则文件按分类组织在不同子目录中\n- 规则列表文件使用 Markdown 格式，按分类分组列出所有规则\n- 模板变量由 load_rule 工具在加载时进行渲染\n\n## 可选步骤\n- 如果规则列表包含多个级别的规则目录（如项目级规则 .jarvis/rules/），分别验证每个级别的规则列表\n- 检查规则文件的元数据（如简介、标签）是否完整\n- 验证规则文件的语法和格式是否符合规范",
  "scope": "global"
}