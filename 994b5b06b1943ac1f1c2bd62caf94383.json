{
  "problem_type": "C函数到Rust的测试增强",
  "content": "### C函数转Rust测试增强方法论\n\n**问题重述**：\n将C语言实现的函数转换为Rust后，需要补充测试用例验证功能一致性，特别是边界情况和复杂场景。\n\n**可复用解决流程**：\n\n1. **分析阶段**（使用read_code + lsp_client）\n   - 读取C源码，理解原始函数的行为和边界条件\n   - 使用lsp_client获取相关符号的C实现\n   - 识别需要测试的关键场景（参数解析、边界值、错误处理）\n\n2. **测试设计阶段**\n   - 设计测试用例覆盖：\n     * 正常路径测试\n     * 边界条件测试\n     * 参数验证测试\n     * 错误处理测试\n   - 构建测试数据结构（如Token链）\n\n3. **实现阶段**（使用edit_file）\n   - 在测试模块中添加新测试函数\n   - 使用精确匹配确保修改准确性\n   - 保持最小变更原则\n\n4. **验证阶段**（使用execute_script）\n   - 运行`cargo test -- --nocapture`验证测试\n   - 逐个测试用例验证通过\n   - 处理互斥锁、全局状态等问题\n\n**注意事项**：\n- 测试期望要与Rust实现的行为一致，而非C源码\n- 避免测试间共享全局状态导致的并发问题\n- 对于静态全局变量，考虑使用独立测试或简化断言\n- 保留原有通过测试，确保无回归问题\n\n**可选步骤**：\n- 清理测试产生的临时文件\n- 添加测试文档注释\n- 考虑性能测试用例"
}