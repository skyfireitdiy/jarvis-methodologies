{
  "problem_type": "交互式配置工具增强",
  "content": "# 交互式配置工具增强方法论\n\n## 问题重述\n在现有交互式配置工具中添加新的配置功能，如让用户选择默认选项、自动生成配置组、设置默认组等。\n\n## 可复用解决流程\n\n### 1. 需求分析与设计\n1. **明确配置结构**：\n   - 查阅配置schema文件，理解目标配置结构\n   - 确认必填字段、可选字段和字段类型\n   - 理解字段间的引用关系（如组名引用配置名）\n\n2. **设计交互流程**：\n   - 确定新功能的插入点（在原有功能完成之后）\n   - 设计用户选择逻辑（单个选项自动选择，多个选项让用户选择）\n   - 设计配置生成逻辑（命名规则、引用关系）\n\n### 2. 代码实现步骤\n1. **添加用户交互**（在数据收集完成后）：\n   ```python\n   if len(options) == 1:\n       selected = options[0]  # 单个选项自动选择\n   else:\n       # 显示选项列表\n       console.print(\"[bold]请选择:[/]\")\n       for i, opt in enumerate(options, 1):\n           console.print(f\"  {i}. {opt}\")\n       # 获取用户输入\n       choice = Prompt.ask(\"请输入序号\")\n       # 验证输入并选择\n   ```\n\n2. **初始化配置节点**（在读取配置后、生成配置前）：\n   ```python\n   if \"new_section\" not in config:\n       config[\"new_section\"] = {}\n   ```\n\n3. **生成配置数据**（在创建配置时）：\n   - 使用清晰的命名规则（如替换特殊字符）\n   - 建立正确的引用关系\n   - 添加用户提示信息\n\n4. **设置默认值**（在所有配置生成后）：\n   - 根据用户选择设置默认配置项\n   - 添加提示信息告知用户\n\n### 3. 验证要点\n1. 配置结构符合schema要求\n2. 引用关系正确（组名存在、引用有效）\n3. 用户提示信息清晰完整\n4. 错误处理完善（无效输入、异常情况）\n\n## 注意事项\n- 保持与现有代码风格一致\n- 使用相同的用户交互组件（Prompt、PrettyOutput等）\n- 添加清晰的注释说明每个步骤\n- 确保配置文件保存格式正确（yaml/json）\n- 测试各种边界情况（单个选项、多个选项、无效输入）\n\n## 可选步骤\n1. 提供配置预览功能\n2. 支持配置模板\n3. 添加配置验证功能\n4. 支持配置导入/导出",
  "scope": "global"
}