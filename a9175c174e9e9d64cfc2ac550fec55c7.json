{
  "problem_type": "Rust原子操作测试修复",
  "content": "问题重述：\n当Rust代码使用原子操作（如fetch_add/fetch_sub）时，测试用例的预期值需要与原子操作的语义保持一致。原子操作返回的是操作前的值，而测试常常需要验证操作后的状态。\n\n可复用解决流程：\n1. 运行测试确认失败：执行`cargo test <test_name>`获取失败详情\n2. 分析原子操作类型：\n   - fetch_add：返回旧值，新值=旧值+增量\n   - fetch_sub：返回旧值，新值=旧值-减量\n3. 理解预期行为：根据函数注释和实现确定正确的返回值语义\n4. 更新测试断言：\n   - 如果函数返回操作后的值：使用wrapping_add/wrapping_sub计算预期值\n   - 如果函数返回操作前的值：直接使用原子操作返回值\n5. 验证修复：重新运行测试确保通过\n\n注意事项：\n- 原子操作的语义是固定的，通常需要修改测试而非实现\n- 注意整数溢出的边界情况，使用wrapping_系列函数\n- 保留原始测试意图，只调整预期值\n\n可选步骤：\n- 添加边界值测试验证wrapping行为\n- 在函数文档中明确说明返回值语义"
}