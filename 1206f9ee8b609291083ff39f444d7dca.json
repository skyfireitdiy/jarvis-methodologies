{
  "problem_type": "Rust项目测试验证和故障修复",
  "content": "## 问题重述\nRust项目中常见的cargo test失败问题，包括编译警告和测试用例失败，需要系统性地识别和修复这些问题，确保最终验证通过。\n\n## 可复用解决流程\n\n### 阶段1：问题识别\n1. **运行完整测试**：`cargo test -- --nocapture`\n2. **识别问题类型**：\n   - 编译警告（unused imports/variables）\n   - 测试失败（外部依赖、断言错误、路径问题）\n3. **分类统计**：记录警告数量和失败测试用例\n\n### 阶段2：警告修复\n1. **识别未使用项**：\n   - 使用 `cargo check --all-targets --all-features`\n   - 重点关注未使用的导入和变量\n2. **修复策略**：\n   - 未使用导入：直接移除\n   - 未使用变量：改为下划线前缀（_var）\n3. **验证修复**：`cargo check` 确认无警告\n\n### 阶段3：测试失败修复\n1. **外部依赖问题**：\n   - 识别依赖外部命令的测试（如clang、gcc）\n   - 替换为轻量级替代（echo、true等）\n   - 保持参数验证逻辑不变\n2. **断言错误**：\n   - 检查期望值是否与实际值匹配\n   - 特别关注边界条件和索引值\n3. **路径和环境问题**：\n   - 使用临时文件避免状态污染\n   - 确保测试环境一致性\n\n### 阶段4：最终验证\n1. **完整测试运行**：`cargo test -- --nocapture`\n2. **验证标准**：\n   - ✅ 无任何编译警告\n   - ✅ 所有测试用例通过（test result: ok）\n   - ✅ 命令返回码为0\n3. **结果归档**：记录测试通过数量和耗时\n\n## 注意事项\n- 修复测试时不要破坏原有验证逻辑\n- 优先修复编译警告，再处理测试失败\n- 对于环境相关的测试失败，考虑使用mock或stub\n- 保持测试的可读性和维护性\n\n## 可选步骤\n- 使用 `cargo clippy` 进行额外代码质量检查\n- 添加 `--release` 模式测试验证\n- 使用 `cargo test --doc` 验证文档测试"
}