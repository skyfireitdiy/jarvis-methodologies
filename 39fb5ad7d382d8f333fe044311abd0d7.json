{
  "problem_type": "Rust代码功能一致性修复",
  "content": "方法论：Rust代码与C语言语义一致性修复\n\n## 问题重述\n当Rust实现的某个函数行为与对应的C语言原始实现存在语义差异时，如何确保功能一致性同时处理内存安全。\n\n## 可复用解决流程\n\n### 步骤1：语义对比分析\n使用工具：read_code + read_symbols\n- 读取Rust当前实现\n- 获取C语言原始实现\n- 对比关键行为差异\n\n### 步骤2：影响评估\n使用工具：rg/fd 搜索调用点\n- 统计函数调用位置\n- 评估API变更影响范围\n- 决定是否接受破坏性变更\n\n### 步骤3：方案设计\n使用工具：task_list_manager 创建任务列表\n- 任务1：核心修复实现\n- 任务2：测试用例适配\n- 任务3：回归验证\n\n### 步骤4：最小化修改\n使用工具：edit_file 精确修改\n- 保持函数意图不变\n- 只修改必要部分\n- 同步更新相关测试\n\n### 步骤5：全面验证\n使用工具：execute_script 运行测试\n- 运行完整测试套件\n- 验证无回归问题\n- 确认修复目标达成\n\n## 注意事项\n1. **内存安全优先**：即使需要破坏性变更，也要避免内存安全问题\n2. **测试覆盖**：必须确保所有相关测试用例都适配新API\n3. **变更影响**：评估并记录破坏性变更的影响范围\n4. **回退策略**：保留git提交点以便必要时回退\n\n## 可选步骤\n- 如果影响范围过大，可考虑兼容性包装层\n- 对于关键函数，可增加额外单元测试\n- 可添加运行时断言验证内存安全"
}