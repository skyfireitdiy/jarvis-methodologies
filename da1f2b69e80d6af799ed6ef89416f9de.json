{
  "problem_type": "间歇性测试失败修复",
  "content": "# 间歇性测试失败修复方法论\n\n## 问题识别\n1. **症状**：测试单独运行通过，批量运行失败\n2. **根因**：测试间状态污染（全局变量、文件系统、环境状态）\n\n## 解决流程\n\n### 阶段1：问题定位\n- [ ] 运行单个测试确认： `cargo test <test_name> -- --nocapture`\n- [ ] 运行批量测试确认： `cargo test -- --nocapture`\n- [ ] 标记失败测试的稳定性模式\n\n### 阶段2：状态污染分析\n- [ ] 检查全局变量使用情况\n- [ ] 验证测试清理机制是否完整\n- [ ] 识别测试间的共享资源\n\n### 阶段3：修复实施\n- [ ] 增强测试隔离性：使用专用重置函数\n- [ ] 简化测试断言：避免对全局状态的精确断言\n- [ ] 使用测试辅助函数：封装全局状态操作\n\n### 阶段4：验证\n- [ ] 连续运行测试3-5次确认稳定性\n- [ ] 检查无回归问题\n\n## 关键工具命令\n```bash\n# 验证测试稳定性\nfor i in {1..5}; do cargo test -- --nocapture; done\n\n# 单独验证特定测试\ncargo test <module>::tests::<test_name> -- --nocapture\n```\n\n## 注意事项\n- 不要改核心业务逻辑，只优化测试\n- 优先使用现有测试辅助函数\n- 断言应聚焦功能正确性而非实现细节\n- 测试清理函数必须幂等"
}