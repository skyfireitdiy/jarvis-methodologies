{
  "problem_type": "Rust-C功能一致性修复",
  "content": "# Rust-C功能一致性修复方法论\n\n## 问题重述\n当将C代码转译为Rust代码时，需要确保Rust实现的行为与原始C实现完全一致，特别是字符串处理、边界检查等细节。\n\n## 可复用解决流程\n\n### 步骤1：行为对比分析\n- 使用`read_code`获取C源码实现\n- 使用`read_code`获取Rust当前实现\n- 标记关键差异点（字符串处理、边界检查等）\n\n### 步骤2：最小变更修复\n- 使用`edit_file`进行精确修改\n- 保持原有结构和意图不变\n- 重点修复：\n  - 字符串长度限制：使用`&str[..len.min(str.len())]`\n  - 边界检查：使用`.min()`防止越界\n  - 内存安全：使用安全切片替代裸指针\n\n### 步骤3：验证与回退\n- 使用`execute_script`运行`cargo check`验证语法\n- 使用`git reset --hard`快速回退失败修改\n- 保持小步提交，确保可回退\n\n### 注意事项\n- 优先修复功能性差异，不引入额外重构\n- 保留原有注释和文档\n- 确保Rust代码风格与项目一致\n- 边界值测试用例可后续补充\n\n### 可选步骤\n如需要添加测试用例，应在mod tests模块中正确添加，使用super::前缀访问被测函数。"
}