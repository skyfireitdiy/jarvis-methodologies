{
  "problem_type": "Gerrit API访问认证",
  "content": "# Gerrit API访问认证方法论\n\n## 规则简介\n\n此方法论说明如何正确访问需要认证的Gerrit API，特别是当遇到认证失败时的排查步骤。\n\n## 你必须遵守的原则\n\n### 认证凭据原则\n\n**要求说明：**\n\n- **必须**：使用Gerrit系统中专门生成的HTTP密码，而非登录Web界面的普通密码\n- **必须**：确认用户名是Gerrit系统中的有效用户ID\n- **禁止**：使用普通登录密码访问API\n\n### URL格式原则\n\n**要求说明：**\n\n- **必须**：在Gerrit API URL中包含 '/a/' 前缀以表示认证请求\n- **必须**：确保API端点路径正确\n- **禁止**：使用未认证的URL格式访问需要认证的端点\n\n## 你必须执行的操作\n\n### 阶段1：准备工作\n\n1. **步骤1**：确认Gerrit服务器的URL\n2. **步骤2**：在Gerrit Web界面的Settings -> HTTP Password中生成专用的HTTP密码\n3. **步骤3**：记录用户名和生成的HTTP密码\n\n### 阶段2：API访问\n\n1. **步骤1**：使用curl或其他HTTP客户端，格式为：`curl -u 'username:HTTP_password' -k 'https://gerrit-server/a/endpoint'`\n2. **步骤2**：如果基本认证失败，尝试使用Authorization头：`curl -H 'Authorization: Basic ' + base64(username:password) ...`\n3. **步骤3**：验证响应结果\n\n### 阶段3：问题排查\n\n1. **步骤1**：如果认证失败，确认是否使用了正确的HTTP密码\n2. **步骤2**：检查URL格式是否包含 '/a/' 前缀\n3. **步骤3**：验证用户名是否正确\n\n## 实践指导\n\n- 在Gerrit中，HTTP密码需要在用户设置中专门生成，不能使用登录密码\n- 大多数Gerrit API端点需要 '/a/' 前缀来表示认证请求\n- 使用curl时，'-k'参数可忽略SSL证书验证（仅用于测试）\n- 可以通过Gerrit Web界面的设置页面管理HTTP密码\n\n## 检查清单\n\n- [ ] 是否使用了Gerrit生成的HTTP密码而非登录密码\n- [ ] URL是否包含 '/a/' 前缀\n- [ ] 用户名是否正确\n- [ ] API端点路径是否正确\n- [ ] 是否正确传递了认证信息",
  "scope": "global"
}