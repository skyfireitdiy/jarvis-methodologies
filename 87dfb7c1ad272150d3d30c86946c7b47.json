{
  "problem_type": "配置项迁移到命令行参数",
  "content": "# 配置项迁移到命令行参数\n\n      ## 规则简介\n\n      本方法论用于指导将配置文件中的配置项迁移到命令行参数，使 CLI 工具更加灵活和易用。特别适用于启动时的一次性配置选项。\n\n      ## 你必须遵守的原则\n\n      ### 兼容性原则\n\n      **要求说明：**\n\n      - **必须**：保持默认行为不变，通过参数提供反向控制\n      - **禁止**：改变现有用户的默认使用体验\n      - **必须**：使用清晰的参数命名（短参数简洁，长参数描述性）\n\n      ### 最小改动原则\n\n      **要求说明：**\n\n      - **必须**：只修改必要的文件和函数\n      - **必须**：逐步验证每个修改步骤\n      - **禁止**：一次性大范围重构\n\n      ### 文档同步原则\n\n      **要求说明：**\n\n      - **必须**：同步更新所有相关文档\n      - **必须**：移除旧的配置项说明\n      - **必须**：添加新的命令行参数说明\n\n      ## 你必须执行的操作\n\n      ### 阶段1：分析与规划\n\n      1. **识别配置项**：确定要迁移的配置项及其影响范围\n      2. **搜索使用位置**：使用 `rg` 搜索配置项的所有引用\n      3. **评估兼容性**：确定默认行为和反向控制方案\n      4. **规划参数命名**：设计短参数（如 `-S`）和长参数（如 `--skip-selector`）\n\n      ### 阶段2：代码修改\n\n      1. **删除配置读取函数**：\n         - 在 `config.py` 中删除配置读取函数（如 `is_enable_xxx()`）\n         - 保留其他相关配置函数\n\n      2. **添加命令行参数**：\n         - 在主 CLI 函数（如 `run_cli`）中添加 typer 参数\n         - 使用 `help` 参数说明用途\n         - 设置合理的默认值\n\n      3. **修改相关函数**：\n         - 修改使用该配置的函数签名，接受参数而非从配置读取\n         - 更新所有调用点传递新参数\n\n      4. **验证修改**：\n         - 检查代码语法\n         - 确认所有调用点已更新\n         - 运行相关测试\n\n      ### 阶段3：文档更新\n\n      1. **更新使用指南**：\n         - 移除旧配置项的说明\n         - 添加新命令行参数的说明\n         - 更新示例命令\n\n      2. **更新快速开始文档**：\n         - 移除配置向导中对该配置的说明\n         - 添加命令行参数的使用说明\n\n      3. **验证文档**：\n         - 确认文档中的所有示例正确\n         - 确认参数说明清晰\n\n      ## 实践指导\n\n      ### 参数命名规范\n\n      - **短参数**：使用单个大写字母，如 `-S`、`-I`\n      - **长参数**：使用描述性名称，如 `--skip-selector`、`--interactive-config`\n      - **布尔参数**：默认值为 `False`，参数名为正向描述（如 `--enable-feature`）\n      - **反向控制参数**：使用 `skip-`、`disable-`、`no-` 等前缀\n\n      ### 常见场景\n\n      1. **开关型配置**：使用布尔型命令行参数，默认保持原有行为\n      2. **路径型配置**：使用字符串参数，支持路径展开\n      3. **选择型配置**：使用枚举参数，提供多个选项\n\n      ### 注意事项\n\n      - 非交互模式下应自动跳过交互式配置选择\n      - 保持向后兼容，不要破坏现有用户的配置文件\n      - 如果配置项已在配置文件中设置，命令行参数应覆盖配置文件\n\n      ## 检查清单\n\n      - [ ] 配置读取函数已删除\n      - [ ] 命令行参数已添加到主 CLI 函数\n      - [ ] 相关函数签名已更新\n      - [ ] 所有调用点已更新\n      - [ ] 文档已同步更新\n      - [ ] 默认行为保持不变\n      - [ ] 代码已提交到 Git",
  "scope": "global"
}