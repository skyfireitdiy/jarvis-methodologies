{
  "problem_type": "修复并发测试失败的测试用例",
  "content": "**问题重述**：Rust测试在并发执行时由于全局状态污染导致测试失败。\n\n**可复用解决流程**：\n1. **识别问题类型**：通过`cargo test`输出确认是否为并发状态污染（测试单独运行通过，批量运行失败）\n2. **分析测试代码**：使用`read_code`检查测试是否使用全局可变状态（如static、Mutex等）\n3. **修复策略选择**：\n   - 优先选择：**调整测试断言**使其更宽松（如从精确计数改为包含性检查）\n   - 备选方案：使用测试隔离工具（如`#[serial]`属性）或重置全局状态\n   - 最终方案：使用`--test-threads=1`参数确保单线程执行\n4. **验证修复**：\n   - 单测试验证：`cargo test <test_name> -- --nocapture`\n   - 全测试验证：`cargo test -- --test-threads=1`\n   - 并发验证：`cargo test`（确保回归测试通过）\n\n**注意事项**：\n- 保持最小改动，避免过度修改原有功能逻辑\n- 优先考虑测试断言调整而非功能修改\n- 记录并发问题的存在，便于未来排查类似问题\n\n**可选步骤**：\n- 添加测试注释说明并发问题的存在\n- 考虑为全局状态管理添加更高效的状态隔离机制"
}