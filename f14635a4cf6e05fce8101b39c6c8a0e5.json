{
  "problem_type": "建立Rust项目性能基线",
  "content": "## 问题重述\n需要为Rust项目建立系统性的性能基线，以便后续进行有针对性的性能优化。基线应包括：编译配置、测试数据、性能热点分析、运行时间记录等。\n\n## 可复用解决流程\n\n### 步骤1: 配置编译环境\n- **文件**: Cargo.toml\n- **配置**:\n  ```toml\n  [profile.release]\n  debug = true          # 保留调试符号用于perf分析\n  opt-level = 3         # 最高优化级别\n  lto = true           # 启用链接时优化\n  codegen-units = 1    # 单一代码生成单元\n  ```\n\n### 步骤2: 识别性能测试用例\n- **工具**: read_code\n- **目标**: 找到处理大数据量的测试用例\n- **标准**: 运行时间>10秒，数据量>10MB\n- **示例**: tests/decompress_integration_test.rs中的test_roundtrip_50mb\n\n### 步骤3: 运行基线测试并记录时间\n- **命令**: `cargo test --release test_roundtrip_50mb -- --nocapture`\n- **记录**: 首次运行时间作为基线\n\n### 步骤4: 采集性能数据\n- **工具**: perf\n- **命令**: `perf record -g cargo test --release test_roundtrip_50mb`\n- **参数**: cpu-clock:pppH事件，99Hz采样频率\n\n### 步骤5: 生成分析报告\n- **报告1**: `perf report > perf_report.txt`\n- **报告2**: `perf report --stdio --sort=dso,symbol > perf_hotspots.txt`\n\n### 步骤6: 建立性能文档\n- **文件**: performance.md\n- **内容**:\n  - 测试配置详情\n  - 基线运行时间\n  - perf采集参数\n  - 热点函数分析(overhead>5%)\n  - 优化方向建议\n\n## 注意事项\n1. 必须确保测试用例在release模式下运行\n2. perf需要root权限或合适的内核参数配置\n3. 基线测试应在相同硬件环境下重复执行3次取平均值\n4. 调试符号(debug=true)对perf分析至关重要\n\n## 可选步骤\n- 使用criterion进行更精确的基准测试\n- 设置CI/CD自动性能回归检测\n- 建立性能测试数据集的标准化生成机制"
}