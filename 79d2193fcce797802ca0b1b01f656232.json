{
  "problem_type": "分析代码库特定功能实现机制",
  "content": "## 问题描述\n需要深入分析代码库中某个特定功能的实现机制，包括正常流程和异常处理。\n\n## 最优解决方案\n\n### 1. 定位相关代码文件\n- 使用 `execute_script` 工具搜索功能相关的文件\n- 搜索策略：功能名称、关键函数名、相关模块名\n- 示例：`find . -name \"*.c\" | rg -i \"功能关键词\"`\n\n### 2. 识别关键函数和变量\n- 使用 `execute_script` 搜索关键词：\n  - 功能相关的函数名（如：redirect、restore、init、cleanup）\n  - 状态标志变量（如：flag_、is_、has_）\n  - 系统调用（如：dup、dup2、signal、atexit）\n- 示例：`rg -n \"关键词1|关键词2\" 文件路径`\n\n### 3. 分析正常执行流程\n- 使用 `read_code` 读取关键代码段\n- 重点关注：\n  - 初始化过程\n  - 状态转换逻辑\n  - 资源分配和释放\n\n### 4. 分析异常处理机制\n- 搜索信号处理：signal、sigaction\n- 搜索清理函数：atexit、cleanup、destroy\n- 搜索错误处理：error、fail、exception\n\n### 5. 识别潜在问题\n- 检查资源泄露风险\n- 评估异常退出时的处理\n- 分析并发和竞态条件\n\n## 注意事项\n\n1. **全面搜索**：不要只关注主要功能文件，还要检查相关的头文件、配置文件\n2. **上下文理解**：读取代码时要包含足够的上下文（前后10-20行）\n3. **状态追踪**：特别关注全局变量和静态变量的状态变化\n4. **异常场景**：重点分析异常退出（kill -9）、网络断开等场景\n5. **版本差异**：注意条件编译和平台相关代码\n\n## 可选步骤\n\n1. **生成调用图**：对于复杂功能，可以使用工具生成函数调用关系图\n2. **日志分析**：如果有运行日志，可以结合日志分析实际执行流程\n3. **测试验证**：编写测试代码验证分析结果的正确性"
}