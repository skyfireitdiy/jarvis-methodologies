{
  "problem_type": "代码审查任务验证标准",
  "content": "# 代码审查任务验证标准\n\n## 规则简介\n\n本方法论用于验证代码审查任务是否真正完成，确保审查报告包含所有必需的产物和信息。适用于验证Gerrit变更、GitHub PR、本地代码审查等各类代码审查任务。\n\n## 你必须遵守的原则\n\n### 原则1：基于证据的验证\n\n**要求说明：**\n\n- **必须**：验证基于实际存在的产物（文件、记忆、评论等）\n- **禁止**：仅凭口头描述或未经验证的主观陈述判断任务完成\n- **必须**：使用工具（read_code、execute_script）确认产物的真实存在\n- **禁止**：推测或假设产物存在\n\n### 原则2：逐条验证预期输出\n\n**要求说明：**\n\n- **必须**：将预期输出解析为独立的可验证条目\n- **必须**：对每一条预期输出分别进行验证\n- **必须**：明确标记每一条的验证状态（PASSED/FAILED）\n- **禁止**：将多个条目混合验证或模糊处理\n\n### 原则3：完整性检查\n\n**要求说明：**\n\n- **必须**：检查所有必需的审查维度是否覆盖\n- **必须**：确认所有问题都包含必要的分析（数据流、控制流、触发场景）\n- **必须**：验证所有行号都经过工具校验\n- **禁止**：接受不完整或缺失关键信息的审查报告\n\n## 你必须执行的操作\n\n### 阶段1：产物存在性验证\n\n1. **检查审查报告文件**：\n   - 查找工作目录中的报告文件（.md、.txt等）\n   - 检查记忆中是否保存了审查结果\n   - 验证Gerrit/GitHub上是否有行评论\n\n2. **验证文件可访问性**：\n   - 使用read_code工具读取报告内容\n   - 确认文件格式符合预期\n   - 检查文件是否包含必需的章节\n\n### 阶段2：内容完整性验证\n\n3. **验证问题列表结构**：\n   - 确认按严重程度分类（严重/中等/低）\n   - 每个问题包含：文件路径、行号、代码摘要\n   - 每个问题包含：深度分析（数据流/控制流/触发场景）\n   - 每个问题包含：可操作的修复建议\n\n4. **验证审查维度覆盖**：\n   - 确认七维度审查是否全部执行\n   - 线程安全、内存安全、错误处理\n   - 缓冲区安全、参数校验、逻辑正确性、资源管理\n\n### 阶段3：质量验证\n\n5. **验证行号校验**：\n   - 确认所有问题行号都经过read_code工具校验\n   - 验证行号对应的代码内容与问题描述匹配\n   - 检查是否存在行号偏差或不准确\n\n6. **验证深度分析质量**：\n   - 数据流路径分析是否完整\n   - 控制流路径分析是否清晰\n   - 触发场景分析是否具体可重现\n   - 修复建议是否可操作\n\n### 阶段4：输出判定\n\n7. **逐条标记验证结果**：\n   - 对每一条预期输出条目标记PASSED或FAILED\n   - 详细说明失败原因和缺失内容\n   - 统计整体完成度百分比\n\n8. **生成验证报告**：\n   - 列出所有验证通过的条目\n   - 列出所有验证失败的条目及原因\n   - 给出明确的整体判定（PASSED/FAILED）\n   - 提供改进建议（如果失败）\n\n## 实践指导\n\n### 验证检查清单\n\n**基础产物检查**：\n- [ ] 审查报告文件存在\n- [ ] 问题列表完整\n- [ ] 按严重程度分类\n- [ ] 包含文件路径和行号\n\n**内容质量检查**：\n- [ ] 每个问题有代码摘要\n- [ ] 每个问题有深度分析（数据流/控制流/触发场景）\n- [ ] 每个问题有修复建议\n- [ ] 七个维度都覆盖\n\n**准确性检查**：\n- [ ] 行号经过工具校验\n- [ ] 行号与代码内容匹配\n- [ ] 问题描述准确具体\n\n**格式检查**：\n- [ ] 包含【Jarvis Agent自主评审】前缀（如需要）\n- [ ] 使用行评论格式（如需要）\n- [ ] JSON格式正确（如用于oss工具）\n\n### 常见错误\n\n1. **报告缺失**：没有生成任何审查报告文件\n2. **内容不完整**：只有问题列表，缺少深度分析和修复建议\n3. **行号未校验**：列出行号但未用工具验证\n4. **维度缺失**：只覆盖了部分审查维度\n5. **分析浅显**：只有表面描述，缺少数据流/控制流/触发场景分析\n6. **建议不可操作**：修复建议模糊或过于抽象\n\n### 验证优先级\n\n**必须满足（PASSED的必要条件）**：\n1. 审查报告存在\n2. 问题列表完整（至少包含文件、行号、描述）\n3. 所有行号已校验\n\n**质量加分项**：\n1. 深度分析完整（数据流/控制流/触发场景）\n2. 修复建议具体可操作\n3. 七个维度全面覆盖\n4. 按严重程度分类\n\n## 检查清单\n\n任务完成验证：\n\n- [ ] 报告文件存在且可访问\n- [ ] 问题列表完整（每个问题包含：文件、行号、摘要、分析、建议）\n- [ ] 所有行号已使用read_code工具校验\n- [ ] 七个审查维度都已覆盖\n- [ ] 深度分析包含数据流/控制流/触发场景\n- [ ] 修复建议具体可操作\n- [ ] 按严重程度分类问题\n- [ ] 格式符合要求（JSON/Markdown/行评论）",
  "scope": "global"
}