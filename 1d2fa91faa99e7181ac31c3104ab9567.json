{
  "problem_type": "code_review",
  "content": "通用代码审查方法论\n\n【问题重述】\n在代码生成后，需要对代码修改的正确性和完整性进行审查，确保代码修改符合用户需求且没有引入新的问题。\n\n【可复用解决流程】\n\n1. 理解用户需求核心\n   - 提取需求中的关键约束点（如必须使用某实例、不能创建新对象、保留上下文等）\n   - 识别功能完整性要求\n\n2. 分析Git Diff关键变更\n   - 逐行检查diff，验证修改点与需求一致性\n   - 识别新增/删除的函数、类、模块\n   - 识别调用点的变更\n\n3. 验证代码生成总结与实际代码一致性\n   - 将总结视为\"待核实的说明\"，不盲信\n   - 对总结中每个关键修改点，在diff中找到对应依据\n   - 如不一致，以实际代码为准并记录问题\n\n4. 检查功能完整性\n   - 需求的所有功能点是否都已实现\n   - 调用链是否完整（从调用点到实现）\n   - 删除的代码是否有替代方案\n\n5. 检查代码正确性\n   - 变量使用前是否已初始化\n   - 方法调用参数是否正确\n   - 异常处理是否完整\n   - 逻辑是否符合需求意图\n\n6. 检查潜在风险\n   - 修改是否破坏现有功能\n   - 是否有遗漏的引用（如删除的模块是否还有其他地方使用）\n   - 资源管理是否正确（如文件句柄、数据库连接等）\n\n7. 代码质量评估（可选）\n   - 代码是否符合项目规范\n   - 是否有明显的代码异味\n   - 注释是否充分\n\n【注意事项】\n- 必须基于实际代码进行审查，不能凭空假设\n- 如需了解更多上下文，使用read_code工具查看相关文件\n- 使用rg/grep查找引用，确保没有遗漏\n- 保守策略：不确定时默认认为存在问题\n\n【可选步骤】\n- 检查是否有单元测试覆盖修改点\n- 检查是否有性能影响\n- 评估是否需要更新文档"
}