{
  "problem_type": "基于Git变更生成Release Note和推广文案",
  "content": "# 基于Git变更生成Release Note和推广文案的标准流程\n\n## 问题重述\n需要根据Git代码变更自动生成结构化的Release Note和多种风格的推广文案，包括检查未提交代码、获取版本信息、分析代码变更、生成发布文档等步骤。\n\n## 可复用解决流程\n\n### 步骤1: 检查并处理未提交代码\n- **工具**: `execute_script`\n- **命令**: `git status --porcelain`\n- **判断**: 如果有未提交文件，使用提交命令（如`jgc`）提交\n- **注意**: 确保代码已提交后再进行版本分析\n\n### 步骤2: 获取版本信息\n- **工具**: `execute_script` + `version_confirm`\n- **命令**: \n  - 获取最新tag: `git describe --tags --abbrev=0`\n  - 获取当前时间: `date +\"%Y-%m-%d\"`\n- **版本计算**: 根据版本类型（patch/minor/major）计算新版本号\n\n### 步骤3: 获取代码变更信息\n- **工具**: `execute_script`\n- **命令**: `git diff <latest_tag>..HEAD | cat -`\n- **注意**: 不使用`--oneline`参数，获取完整的变更详情\n\n### 步骤4: 分析代码变更内容\n- **分析维度**:\n  - 新功能 (Features): 新增文件、新增功能模块\n  - 修复 (Fixes): Bug修复、问题解决\n  - 优化与重构 (Refactors & Improvements): 性能优化、代码重构\n  - 文档更新 (Documentation): 文档、注释更新\n  - 其他 (Miscellaneous): 其他变更\n- **分析方法**: 通过关键词匹配（fix、优化、refactor、doc等）分类\n\n### 步骤5: 生成Release Note\n- **格式规范**:\n```markdown\n### Release Note - v{new_version} {current_date}\n\n#### **新功能 (Features)**  \n- {new_features1}\n- {new_features2}\n- ...\n\n#### **修复 (Fixes)**  \n- {fix1}\n- {fix2}\n- ...\n\n#### **优化与重构 (Refactors & Improvements)**  \n- {refactor1}\n- {refactor2}\n- ...\n\n#### **文档更新 (Documentation)**  \n- {doc1}\n- {doc2}\n- ...\n\n#### **其他 (Miscellaneous)**  \n- {misc1}\n- {misc2}\n- ...\n\n本次更新主要...\n```\n\n### 步骤6: 生成多种风格的推广文案\n- **专业技术风**: 突出技术改进和系统稳定性\n- **简洁明了风**: 简短描述更新内容\n- **问题解决风**: 强调解决了什么问题\n- **用户友好风**: 感性表达，感谢用户\n- **开发者导向风**: 面向开发者，列出具体变更\n\n### 步骤7: 工具选择策略\n- **优先使用**: `generate_release_note`工具（如果可用且无bug）\n- **备选方案**: `sub_agent`工具调用大模型生成\n- **手动执行**: 使用`execute_script`分步执行上述流程\n\n## 注意事项\n\n1. **工具可靠性**: `generate_release_note`工具存在已知bug（Version对象属性错误），需要准备备选方案\n2. **版本计算**: 确保正确解析语义化版本号，处理版本号格式异常\n3. **代码分析**: 自动化分析可能不够准确，建议人工复核关键变更\n4. **格式一致性**: 保持Release Note格式的统一性\n5. **推广文案**: 根据目标受众调整文案风格和内容重点\n\n## 可选步骤\n\n- **自动提交**: 在步骤1中可以选择自动提交未提交代码\n- **详细分析**: 可以增加更复杂的代码变更分析逻辑\n- **多语言支持**: 生成不同语言版本的Release Note\n- **模板定制**: 根据项目特点定制Release Note模板\n\n## 故障排除\n\n- **generate_release_note工具失败**: 使用`sub_agent`或手动执行脚本\n- **版本号获取失败**: 使用默认版本号v0.0.1\n- **git diff无输出**: 检查是否真的有代码变更\n- **分析结果不准确**: 手动调整分类或使用更精确的分析算法"
}