{
  "problem_type": "rust动态库debug/release兼容性测试",
  "content": "|||## 问题重述\n需要验证Rust动态库在上下游debug_assertions开关不一致时的兼容性，确保4种debug/release组合下功能正常、断言行为正确、接口兼容。\n\n## 可复用解决流程\n\n### 阶段1：项目结构设计\n1. **模块化架构**：\n   - 上游动态库工程（dylib_package/）\n   - 下游验证应用（use_dylib_exe/）\n   - 测试配置管理（test_configs/）\n   - 结果收集（debug_test_results/）\n\n2. **配置文件系统**：\n   - 创建4个专门的Cargo.toml模板\n   - 使用debug-assertions标志控制编译行为\n\n### 阶段2：验证维度定义\n对每个组合验证以下6个维度：\n1. **断言触发行为**：debug_assert!是否正常触发或优化\n2. **接口兼容性**：下游调用是否受上游配置影响\n3. **性能表现**：debug vs release模式性能差异\n4. **错误处理**：断言触发时的错误处理机制\n5. **边界条件**：异常参数下的系统行为\n6. **功能完整性**：所有Rust特性是否正常\n\n### 阶段3：自动化测试实现\n使用以下工具完成验证：\n- **run_debug_test.sh**：一键执行4种组合测试\n- **build.rs**：动态库链接配置\n- **专用测试函数**：test_assertion_trigger(), test_boundary_condition(), test_complex_assertion()\n\n### 阶段4：结果验证标准\n- ✅ 功能正常：所有接口调用成功\n- ✅ 断言独立：上游debug_assert!行为不受下游影响\n- ✅ 性能优化：release模式性能显著提升\n- ✅ 错误处理：断言触发时panic行为正确\n\n## 注意事项\n- 必须使用`[profile.release] debug-assertions = true/false`精确控制\n- 每次测试前清理旧构建避免缓存影响\n- 验证时使用边界值和异常值触发断言\n- 记录详细日志便于问题定位\n\n## 可选步骤\n- 添加性能基准测试对比\n- 扩展到其他条件编译标志\n- 集成到CI/CD流程\n- 跨平台验证（Windows/macOS）|||"
}