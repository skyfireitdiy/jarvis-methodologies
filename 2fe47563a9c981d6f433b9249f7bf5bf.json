{
  "problem_type": "C函数到Rust移植",
  "content": "# C函数到Rust的TDD移植方法论\n\n## 问题重述\n将C语言函数移植到Rust，需保持语义等价性，通过TDD流程验证正确性。\n\n## 可复用解决流程\n\n### 阶段1：RESEARCH（调研）\n1. 使用read_code获取C源码和上下文\n2. 使用read_symbols分析依赖关系\n3. 确认函数签名和语义边界\n\n### 阶段2：INNOVATE（设计）\n1. 分析C实现的关键行为：\n   - 指针操作模式\n   - 内存管理方式\n   - 边界条件处理\n2. 设计Rust等价实现策略：\n   - 借用检查器兼容性方案\n   - unsafe使用必要性评估\n   - 测试用例设计思路\n\n### 阶段3：PLAN（计划）\n1. TDD三阶段规划：\n   - Red：设计测试用例（覆盖正常/边界/错误场景）\n   - Green：实现最小功能使测试通过\n   - Refactor：优化代码保持测试通过\n2. 测试用例设计清单：\n   - 基础功能测试\n   - 嵌套/递归场景\n   - 边界值处理\n   - EOF/空值处理\n   - 错误路径覆盖\n\n### 阶段4：EXECUTE（执行）\n1. 执行顺序：\n   - 先编写测试（会编译失败）\n   - 实现最小功能\n   - 验证所有测试通过\n2. 使用工具组合：\n   - edit_file进行代码修改\n   - execute_script验证构建\n   - 每次修改后git commit\n\n### 阶段5：REVIEW（检查）\n1. 验证标准：\n   - 所有测试通过\n   - 编译无警告\n   - 语义与C实现等价\n   - 代码风格符合规范\n\n## 注意事项\n- 优先使用Rust原生类型\n- 谨慎使用unsafe，必须添加安全注释\n- 保持最小变更原则\n- 每次修改前创建安全提交点\n\n## 可选步骤\n- 性能基准测试（如C版本有性能要求）\n- 内存安全检查（使用Miri）\n- 模糊测试验证健壮性"
}