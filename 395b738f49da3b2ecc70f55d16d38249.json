{
  "problem_type": "提取公共函数",
  "content": "## 问题重述\n在代码重构过程中，发现某个功能的实现在多处重复或被多个模块需要，需要将其提取为公共函数以提高代码复用性和可维护性。\n\n## 可复用解决流程\n\n### 步骤1：识别提取目标\n- 搜索代码库中的重复实现或可复用逻辑\n- 分析函数的通用性和依赖关系\n- 确定目标模块（如 utils、helpers 或专门的公共模块）\n\n### 步骤2：设计公共函数接口\n- 确定函数名称（使用清晰的动词或动词短语）\n- 定义参数列表和返回值类型\n- 编写详细的文档字符串（说明用途、参数、返回值）\n- 添加到 `__all__` 列表（Python）\n\n### 步骤3：提取并重构代码\n- 将原函数逻辑复制到公共模块\n- 修改函数签名（如从静态方法改为独立函数）\n- 更新导入语句\n- 处理类型注解（使用 typing 模块的类型）\n\n### 步骤4：更新调用方\n- 在所有原调用位置导入新的公共函数\n- 替换原有调用\n- 保留向后兼容（必要时保留旧函数作为包装）\n\n### 步骤5：类型检查与验证\n- 运行 mypy 等静态类型检查工具\n- 修复类型错误（必要时使用 cast 进行类型断言）\n- 验证功能一致性\n- 运行相关测试用例\n\n## 注意事项\n1. **依赖管理**：公共函数应尽量减少对特定模块的依赖\n2. **类型安全**：使用类型注解和类型检查确保代码质量\n3. **向后兼容**：在重构大项目时，保留旧接口作为过渡\n4. **文档完整**：清晰的文档字符串是公共函数的重要组成部分\n5. **最小改动**：每次只修改一个模块，逐步验证\n\n## 可选步骤\n- 为公共函数编写单元测试\n- 更新相关文档（如 README、API 文档）\n- 使用 pylint、black 等工具进行代码质量检查",
  "scope": "global"
}