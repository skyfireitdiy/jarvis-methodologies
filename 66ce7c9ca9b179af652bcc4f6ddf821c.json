{
  "problem_type": "C语言编译器测试修复",
  "content": "问题重述：\nC语言编译器项目在测试阶段出现失败，包括作用域管理、标签查找、文件处理等方面的测试未通过。\n\n可复用解决流程：\n1. **状态收集** - 运行完整测试获取失败信息\n   - 执行`cargo test -- --nocapture`获取所有失败详情\n   - 记录失败测试名称、失败断言、期望vs实际值\n\n2. **单独验证** - 验证失败是否可复现\n   - 使用`cargo test <test_name> -- --nocapture`单独运行每个失败测试\n   - 确认失败是否稳定复现（排除并发/环境问题）\n\n3. **代码定位** - 精确定位问题代码\n   - 使用`read_code`工具读取失败测试所在的测试函数\n   - 分析测试逻辑和断言条件\n   - 检查被测试的功能实现代码\n\n4. **问题分析** - 识别根本原因\n   - **状态污染**：测试间共享状态未正确清理\n   - **数据不一致**：测试用例与实现逻辑不匹配\n   - **边界条件**：空值、边界值处理不当\n   - **并发问题**：多线程/多进程环境下的竞态条件\n\n5. **修复实施** - 针对性修复\n   - 添加状态清理函数（如`clear_scopes()`）\n   - 统一测试用例与实现的数据格式\n   - 补充边界条件处理\n   - 添加适当的同步机制\n\n6. **验证修复** - 确保修复有效且无回归\n   - 重新运行完整测试套件\n   - 确保原本通过的测试不受影响\n   - 验证新修复的测试通过\n\n注意事项：\n- 优先修复根本原因，而非仅修复测试用例\n- 确保所有测试通过后再提交\n- 注意测试间的状态隔离\n- 使用最小改动原则\n\n可选步骤：\n- 添加调试输出辅助定位复杂问题\n- 创建临时测试文件验证修复\n- 使用`git bisect`追踪引入问题的提交"
}