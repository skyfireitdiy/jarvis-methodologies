{
  "problem_type": "Python代码实现验证",
  "content": "# Python代码实现验证方法论\n\n## 规则简介\n\n本方法论用于验证Python代码实现任务是否真正完成，确保所有预期输出条目都有对应的实际产物支撑。适用于模块实现、类实现、功能开发等任务的验证场景。\n\n## 你必须遵守的原则\n\n### 原则1：逐条验证预期输出\n\n**要求说明：**\n\n- **必须**：将预期输出解析为独立的条目列表（按换行、编号1)、2)、3)或markdown列表-item等方式拆分）\n- **必须**：对每一条预期输出条目分别进行验证，不能跳过任何条目\n- **必须**：为每条条目标记验证结果（PASSED/FAILED）\n- **禁止**：假设或推测任何条目已完成，必须基于实际验证结果\n\n### 原则2：基于实际产物验证\n\n**要求说明：**\n\n- **必须**：使用read_code工具检查代码文件是否存在且内容符合要求\n- **必须**：使用execute_script工具运行测试和检查工具\n- **必须**：基于工具执行的实际结果进行判断\n- **禁止**：仅检查文件存在性而不验证内容完整性\n- **禁止**：虚构或假设验证结果\n\n### 原则3：整体判定标准\n\n**要求说明：**\n\n- **必须**：只有所有预期输出条目都验证通过时，才判定任务整体完成\n- **必须**：如果任意一条条目验证失败，必须标记整体为未完成\n- **必须**：对失败条目提供详细的失败原因和修复建议\n- **禁止**：部分通过就判定任务完成\n\n## 你必须执行的操作\n\n### 阶段1：解析预期输出\n\n1. **识别条目分隔符**：检查预期输出使用的分隔方式（换行、编号、列表符号等）\n2. **拆分为独立条目**：将预期输出解析为独立的条目列表\n3. **理解条目要求**：明确每条条目的具体验证标准\n\n### 阶段2：验证文件和代码结构\n\n1. **检查文件存在性**：使用read_code工具读取主要实现文件，验证文件路径是否正确\n2. **验证代码结构**：检查必需的类定义、数据类字段、方法签名和类型注解\n3. **验证核心实现**：检查必需方法是否实现，验证方法的参数和返回类型\n\n### 阶段3：验证测试覆盖\n\n1. **检查测试文件**：使用execute_script统计测试用例数量（grep -c 'def test_'）\n2. **运行测试**：使用pytest运行测试套件，检查测试执行结果\n3. **检查测试覆盖率**（如有要求）：运行pytest --cov查看覆盖率\n\n### 阶段4：验证代码质量\n\n1. **类型检查**：运行mypy --strict进行类型检查，验证是否无警告\n2. **代码风格检查**（如有要求）：运行ruff检查代码风格\n3. **其他质量检查**：根据任务要求执行其他检查工具\n\n### 阶段5：汇总验证结果\n\n1. **逐条标记结果**：为每条预期输出条目标记PASSED或FAILED\n2. **整体判定**：如果所有条目都是PASSED，输出<!!!COMPLETE!!!>；如果有任何FAILED条目，说明未完成原因\n3. **提供修复建议**（如有失败）：分析失败原因，提供具体的修复建议\n\n## 实践指导\n\n### 最佳实践\n\n1. **使用批量工具调用**：对于无依赖关系的验证步骤，可以一次调用多个工具提高效率\n2. **限制输出长度**：使用head、tail、grep等命令限制输出，避免信息过载\n3. **分段读取代码**：对于大文件，分段读取关键部分而非一次读取全部\n\n### 常见错误\n\n1. **仅检查文件存在**：不能只验证文件存在，必须检查内容是否符合要求\n2. **假设测试通过**：必须实际运行测试，不能假设测试会通过\n3. **忽略类型检查**：如果任务要求mypy无警告，必须实际运行mypy验证\n4. **部分验证就判定完成**：必须验证所有预期输出条目\n\n## 检查清单\n\n- [ ] 所有预期输出条目已识别并列出\n- [ ] 每条条目都进行了实际验证（使用工具执行）\n- [ ] 主要实现文件已检查（文件存在、类定义、方法实现）\n- [ ] 测试文件已检查（文件存在、测试数量、测试通过）\n- [ ] 代码质量检查已执行（mypy、ruff等）\n- [ ] 每条条目都有明确的PASSED/FAILED标记\n- [ ] 失败条目有详细的失败原因和修复建议\n- [ ] 整体判定结果明确（完成或未完成）",
  "scope": "global"
}