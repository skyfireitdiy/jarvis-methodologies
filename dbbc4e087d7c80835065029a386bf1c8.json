{
  "problem_type": "跨模块关系分析",
  "content": "# 跨模块关系分析方法论\n\n## 规则简介\n\n跨模块关系分析是软件架构反向工程的重要环节，通过对各模块间的数据流、控制流、接口关系进行分析，构建完整的模块依赖关系图，识别潜在的循环依赖问题。该方法论提供了一套标准化的分析流程和输出规范。\n\n## 你必须遵守的原则\n\n### 分析完整性原则\n\n**要求说明：**\n\n- **必须**：覆盖所有主要模块，不得遗漏任何核心功能\n- **必须**：分析模块间的全部交互方式（数据流、控制流、接口调用）\n- **禁止**：只分析部分模块而忽略其他模块\n- **禁止**：遗漏模块间的隐式依赖关系\n\n### 文档化原则\n\n**要求说明：**\n\n- **必须**：生成结构化的分析文档，包含数据流、控制流、接口分析等章节\n- **必须**：使用图表展示模块依赖关系\n- **禁止**：仅口头描述或简单的文本记录\n- **禁止**：文档内容不完整或缺少关键信息\n\n### 循环依赖检测原则\n\n**要求说明：**\n\n- **必须**：明确识别并报告是否存在循环依赖\n- **必须**：提供循环依赖的解决方案建议\n- **禁止**：忽略循环依赖问题\n- **禁止**：错误判断模块间的依赖关系\n\n## 你必须执行的操作\n\n### 阶段1：数据收集\n\n1. **整理模块清单**：列出项目中的所有核心模块及其功能职责\n2. **收集模块文档**：获取各模块的详细设计文档和接口说明\n3. **分析代码依赖**：通过代码分析工具或手动检查确定模块间的依赖关系\n4. **识别数据流向**：梳理模块间的数据传递和共享机制\n\n### 阶段2：关系分析\n\n1. **数据流分析**：分析模块间的数据传递路径、格式和处理逻辑\n2. **控制流分析**：分析模块间的调用关系、控制传递和执行顺序\n3. **接口分析**：分析模块间的所有接口定义、参数传递和协议规范\n4. **依赖关系图构建**：绘制完整的模块依赖关系图\n\n### 阶段3：深度分析\n\n1. **循环依赖识别**：检查是否存在模块间的循环依赖问题\n2. **核心/边缘模块识别**：识别哪些模块是核心模块（被广泛依赖），哪些是边缘模块（依赖较少）\n3. **架构评估**：评估架构的合理性、可维护性和扩展性\n4. **风险评估**：识别架构中的潜在风险和改进点\n\n### 阶段4：文档输出\n\n1. **生成分析报告**：整理所有分析结果，形成完整的跨模块关系分析文档\n2. **可视化图表**：提供模块依赖关系图、数据流向图等可视化内容\n3. **设计模式总结**：汇总项目中使用的设计模式和架构模式\n4. **改进建议**：提供架构优化和改进的建议\n\n## 实践指导\n\n- 在分析过程中可以使用依赖分析工具辅助识别模块关系\n- 建议采用自上而下和自下而上相结合的分析方法\n- 对于复杂的模块关系，可以分层进行分析\n- 在文档中应标注不确定或需要进一步分析的部分\n\n## 检查清单\n\n- [ ] 所有核心模块都已包含在分析范围\n- [ ] 数据流分析完整，涵盖初始化、运行时、异常等场景\n- [ ] 控制流分析清晰，包括初始化控制流、业务控制流等\n- [ ] 接口分析详细，包含函数接口、Trait接口、消息接口等\n- [ ] 模块依赖关系图准确且易于理解\n- [ ] 循环依赖已识别并评估影响\n- [ ] 核心模块与边缘模块已正确分类\n- [ ] 分析报告结构清晰，便于后续参考",
  "scope": "global"
}