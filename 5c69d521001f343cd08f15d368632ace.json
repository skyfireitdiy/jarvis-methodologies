{
  "problem_type": "C2Rust编译器移植测试失败修复",
  "content": "方法论：C2Rust编译器移植测试失败修复\n\n## 问题重述\n当从C语言源码转译到Rust时，测试套件出现失败，需定位并修复逻辑差异，确保所有测试通过。\n\n## 可复用解决流程\n1. **症状识别**  \n   - 执行 `cargo test -- --nocapture` 获取完整失败信息  \n   - 重点检查：  \n     • 边界值测试（如 `usize::MAX` 处理）  \n     • 原子操作返回值逻辑  \n\n2. **根因定位**  \n   - 使用 `read_code` 读取目标函数及测试用例  \n   - 对比C源码与Rust实现差异（通过 `read_symbols` 获取C符号）  \n   - 关注原子操作：`fetch_add`/`fetch_sub` 返回旧值 vs 新值  \n\n3. **修复验证**  \n   - 采用最小改动：仅修改逻辑错误行  \n   - 使用 `wrapping_add`/`wrapping_sub` 处理边界溢出  \n   - 修复后立即运行 `cargo test` 验证无回归  \n\n4. **最终确认**  \n   - 确保 100% 测试通过（478/478）  \n   - 清理临时调试输出  \n\n## 注意事项\n- 禁止引入 `todo!` 或 `unimplemented!`  \n- 修复后需验证所有测试，包括未直接关联的用例  \n- 保留Git回退点以便快速回滚错误修复  \n\n## 可选步骤\n如需调试，可临时添加 `dbg!()` 输出变量值，但修复后需移除。"
}