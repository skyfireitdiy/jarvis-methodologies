{
  "problem_type": "Rust编译错误作用域诊断",
  "content": "## 问题诊断框架：Rust作用域和条件编译错误\n\n### 问题重述\n当Rust编译器报告\"cannot find function/type/variant in this scope\"时，需要系统性地诊断作用域问题。\n\n### 可复用解决流程\n\n**步骤1：定位定义**\n- 使用`lsp_client.search_symbol`查找符号定义位置\n- 记录符号所在文件和行号\n\n**步骤2：检查条件编译**\n- 使用`read_code`读取符号定义附近代码\n- 查找`#[cfg(test)]`、`#[cfg(feature = \"...\")]`等条件编译属性\n- 确认调用代码是否在相同配置下\n\n**步骤3：验证作用域**\n- 检查函数是否为`pub`可见性\n- 确认模块路径是否正确\n- 验证是否缺少`use`声明\n\n**步骤4：修复方案选择**\n- **方案A**：移除不必要的`#[cfg(test)]`（适用于通用功能）\n- **方案B**：为调用方添加匹配的条件编译\n- **方案C**：调整函数可见性修饰符\n\n**步骤5：实施修复**\n- 使用`edit_file`进行精确修改\n- 确认修改不影响其他配置\n\n### 注意事项\n- 优先检查测试配置限制，这是最常见的隐藏问题\n- 修改前备份原始文件，防止意外破坏\n- 考虑函数的真实使用场景，避免过度限制或过度开放\n- 注意`#[cfg(test)]`与`#[cfg(debug_assertions)]`的区别\n\n### 可选步骤\n- 运行`cargo check --tests`验证测试配置\n- 运行`cargo check`验证正常配置\n- 如有疑问，添加临时日志确认配置生效"
}