{
  "problem_type": "Rust测试间歇性失败分析",
  "content": "## Rust测试间歇性失败分析方法论\n\n### 问题重述\nRust测试在某些情况下失败，但在其他情况下通过，表现为间歇性或环境依赖性失败。\n\n### 可复用解决流程\n\n1. **隔离测试运行**\n   - 使用 `cargo test <测试名称> -- --nocapture` 单独运行失败测试\n   - 使用 `cargo test -- --nocapture` 运行全部测试\n   - 对比结果确认是否为间歇性失败\n\n2. **并发问题排查**\n   - 检查是否存在全局可变状态\n   - 验证测试间是否共享资源（文件、网络、全局变量）\n   - 使用 `cargo test -- --test-threads=1` 单线程运行确认并发问题\n\n3. **状态污染分析**\n   - 检查测试初始化函数是否完全重置状态\n   - 验证测试清理函数是否正确执行\n   - 检查是否存在测试间的隐式依赖\n\n4. **环境依赖验证**\n   - 检查是否依赖特定文件系统状态\n   - 验证是否依赖网络或外部服务\n   - 确认是否依赖系统时间或随机数\n\n### 工具使用\n- `execute_script`: 用于运行测试命令并捕获输出\n- `read_code`: 分析测试代码和实现逻辑\n- 调试输出：添加 `println!` 或 `dbg!` 获取状态信息\n\n### 注意事项\n- 间歇性失败通常指示竞态条件或状态污染\n- 全局状态管理不当是最常见原因\n- 测试清理不完整会导致后续测试失败\n- 考虑使用 `serial_test` crate 处理串行化测试需求"
}