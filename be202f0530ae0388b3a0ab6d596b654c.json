{
  "problem_type": "Rust项目测试修复和编译错误处理",
  "content": "## Rust项目测试修复和编译错误处理方法论\n\n### 问题重述\n处理Rust项目中因missing test attributes、unsafe block缺失、编译警告导致的测试失败问题。\n\n### 可复用解决流程\n\n#### 阶段1：问题诊断\n1. **运行测试定位问题**\n   ```bash\n   cargo test -- --nocapture\n   ```\n\n2. **分类问题类型**\n   - 测试属性缺失（missing `#[test]` or `#[should_panic]`）\n   - unsafe操作相关编译错误（E0133）\n   - 编译警告（unused variables, naming conventions）\n\n#### 阶段2：测试修复（TDD模式）\n1. **识别预期panic的测试**\n   - 查找函数名包含`invalid_`、`unsupported_`等前缀的测试\n   - 确认测试代码确实包含`panic!`或预期失败的逻辑\n\n2. **添加缺失属性**\n   ```rust\n   #[test]\n   #[should_panic]\n   fn test_function_name() {\n       // 预期panic的测试逻辑\n   }\n   ```\n\n#### 阶段3：编译错误修复（unsafe相关）\n1. **识别unsafe操作**\n   - 使用`cargo check`定位E0133错误\n   - 重点关注：raw pointer操作、unsafe函数调用\n\n2. **系统性修复模式**\n   - 函数调用：`unsafe { function_call() }`\n   - 指针解引用：`unsafe { &*ptr }`\n   - 保持最小改动：仅包装unsafe部分，不改变逻辑\n\n#### 阶段4：编译警告处理\n1. **优先级排序**\n   - 高：影响测试运行的警告\n   - 中：命名规范警告\n   - 低：未使用代码警告\n\n2. **标准化处理**\n   - 未使用变量：重命名为`_var_name`\n   - 命名规范：统一为小写+下划线\n\n### 注意事项\n- 保持最小改动原则，避免重构\n- 保留必要的unsafe代码块\n- 每次修改后运行`cargo test`验证\n- 使用`RUST_BACKTRACE=1`获取详细错误信息\n\n### 可选步骤\n- 修复后运行`cargo clippy`检查更多警告\n- 考虑添加`#![allow(dead_code)]`保留必要的dead code"
}