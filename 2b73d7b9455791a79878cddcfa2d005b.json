{
  "problem_type": "C函数行为一致性修复",
  "content": "## C到Rust移植中函数行为一致性修复方法论\n\n### 问题重述\n在将C代码移植到Rust时，常出现函数行为与原始C实现不一致的情况，特别是边界条件和特殊情况处理。\n\n### 可复用解决流程\n\n#### 步骤1: 行为差异分析\n- 使用 `read_code` 读取Rust实现和C实现（通过symbols.jsonl）\n- 对比关键函数的行为差异\n- 识别测试用例期望与C实现的偏差\n\n#### 步骤2: 制定修复方案\n- 明确C实现的精确行为\n- 评估修复对现有测试的影响\n- 确定最小修改范围\n\n#### 步骤3: 实施修复\n- 使用 `edit_file` 进行精确修改，保留函数结构和意图\n- 优先修改核心逻辑，保持接口不变\n\n#### 步骤4: 测试验证\n- 运行 `cargo test -- --nocapture` 验证基本功能\n- 识别并更新受影响的测试用例\n- 确保所有相关测试通过\n\n#### 步骤5: 回归测试\n- 区分目标修复相关的测试失败和其他无关的失败\n- 只调整与目标修复直接相关的测试用例\n\n### 注意事项\n- 保持最小改动原则，避免大范围重构\n- 修改测试用例时需提供注释说明与C实现的一致性\n- 区分边界条件的不同处理方式\n\n### 可选步骤\n- 如需验证C实现行为，可创建临时C测试程序\n- 使用git的stash功能保存中间状态"
}