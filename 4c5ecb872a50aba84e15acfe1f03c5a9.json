{
  "problem_type": "C到Rust移植行为验证",
  "content": "# C到Rust移植行为验证方法论\n\n## 问题重述\n在将C预处理器功能移植到Rust时，需要验证Rust实现是否与原始C实现在行为上完全一致，特别是对条件编译指令的处理逻辑。\n\n## 可复用解决流程\n\n### 步骤1：定位原始C实现\n使用搜索工具定位C源码中的相关函数：\n```bash\nfind /path/to/chibicc -name \"*.c\" -exec grep -l \"function_name\" {} \\\\;\n```\n\n### 步骤2：分析C实现行为\n读取C源码，重点关注：\n- 函数入口参数和返回类型\n- 条件判断逻辑（特别是边界条件）\n- 遇到各种指令时的处理行为\n- 嵌套结构的处理\n\n### 步骤3：对比Rust实现\n检查Rust代码中的对应实现：\n- 函数签名是否与C一致\n- 条件分支逻辑是否匹配\n- 返回值行为是否符合预期\n\n### 步骤4：验证测试用例\n检查测试用例的预期结果：\n- 测试用例是否真实反映了C实现的行为\n- 预期返回值是否与C实现一致\n- 边界条件测试是否充分\n\n### 步骤5：执行验证\n运行测试确认行为一致性：\n```bash\ncargo test test_function_name -- --nocapture\n```\n\n## 注意事项\n1. 重点关注条件编译指令的处理时机：`#if`、`#elif`、`#else`、`#endif`\n2. 注意嵌套结构的正确处理\n3. 验证EOF边界条件\n4. 确保Rust实现的内存安全要求得到满足\n\n## 可选步骤\n- 对复杂逻辑创建独立的验证测试\n- 添加性能测试确保移植后效率\n- 记录行为差异以便未来维护"
}